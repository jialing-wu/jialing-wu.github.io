---
layout: methods-guide
title: "Network Centrality in R"
title_zh: "R 中的网络中心性分析"
parent_title: "Network Analysis"
parent_title_zh: "网络分析"
parent_url: "reg-network.html"
bilingual: true
mathjax: true
---

<style>
.level-badge{display:inline-flex;align-items:center;gap:6px;font-family:var(--sans);font-size:10px;font-weight:600;letter-spacing:.1em;text-transform:uppercase;padding:4px 12px;border-radius:20px;margin-bottom:8px}
.level-badge.beginner{background:rgba(91,140,133,.12);color:#4a7a72}
.level-badge.intermediate{background:rgba(194,153,61,.12);color:#9a7a2e}
.level-badge.advanced{background:rgba(181,55,42,.1);color:#a0382e}
.depth-divider{display:flex;align-items:center;gap:16px;margin:40px 0 28px}
.depth-divider::before,.depth-divider::after{content:'';flex:1;height:1px;background:var(--parchment)}
.depth-divider span{font-family:var(--sans);font-size:10px;font-weight:600;letter-spacing:.14em;text-transform:uppercase;color:var(--ink-ghost);white-space:nowrap}
.concept-row{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin:20px 0}
.concept-card{background:var(--paper);border:1px solid var(--parchment);border-radius:6px;padding:18px 20px;transition:all .3s ease;box-shadow:0 1px 3px rgba(30,24,15,.03)}
.concept-card:hover{border-color:var(--gold-soft);box-shadow:0 3px 12px rgba(194,153,61,.08);transform:translateY(-1px)}
.concept-card .card-icon{font-family:var(--sans);font-size:10px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--paper);background:var(--gold);display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:6px;margin-bottom:10px;box-shadow:0 2px 4px rgba(194,153,61,.2)}
.concept-card h4{font-family:var(--sans);font-size:13px;font-weight:600;color:var(--ink-soft);margin:0 0 6px}
.concept-card p{font-size:13.5px;line-height:1.7;color:var(--ink-faded);margin:0}
.guide-formula{background:rgba(30,24,15,.03);border:1px solid var(--parchment);border-radius:6px;padding:20px 24px;margin:20px 0;text-align:center;font-size:16px;line-height:1.8;color:var(--ink-soft);font-family:var(--mono);letter-spacing:.02em;overflow-x:auto}
.unpack-list{display:grid;grid-template-columns:1fr;gap:10px;margin:16px 0;padding:0;list-style:none}
.unpack-item{display:flex;gap:14px;align-items:flex-start;padding:12px 16px;background:var(--paper);border:1px solid var(--parchment);border-radius:6px;transition:border-color .25s}
.unpack-item:hover{border-color:var(--gold-soft)}
.unpack-item .symbol{font-family:var(--mono);font-size:14px;font-weight:600;color:var(--gold);white-space:nowrap;min-width:80px;padding-top:1px}
.unpack-item .explain{font-size:13.5px;line-height:1.7;color:var(--ink-faded)}
.callout{border-left:3px solid var(--gold);background:rgba(194,153,61,.04);padding:16px 20px;margin:20px 0;border-radius:0 6px 6px 0}
.callout.tip{border-left-color:#5b8c85;background:rgba(91,140,133,.04)}
.callout.warn{border-left-color:var(--red);background:rgba(181,55,42,.04)}
.callout .callout-label{font-family:var(--sans);font-size:10px;font-weight:700;letter-spacing:.12em;text-transform:uppercase;color:var(--gold);margin-bottom:6px}
.callout.tip .callout-label{color:#5b8c85}
.callout.warn .callout-label{color:var(--red)}
.callout p{font-size:14px;line-height:1.75;color:var(--ink-faded);margin:0}
.callout p + p{margin-top:8px}
.step-flow{display:grid;grid-template-columns:1fr;gap:10px;margin:16px 0;padding:0;list-style:none;counter-reset:step}
.step-flow li{counter-increment:step;display:flex;gap:14px;align-items:flex-start;padding:12px 16px;background:var(--paper);border:1px solid var(--parchment);border-radius:6px;font-size:13.5px;line-height:1.7;color:var(--ink-faded);transition:border-color .25s}
.step-flow li:hover{border-color:var(--gold-soft)}
.step-flow li::before{content:counter(step);font-family:var(--sans);font-size:11px;font-weight:700;color:var(--paper);background:var(--gold);min-width:26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:1px;box-shadow:0 1px 3px rgba(194,153,61,.2)}
.code-block{background:var(--ink);color:#e8e0d4;padding:24px 28px;border-radius:6px;overflow-x:auto;font-size:13px;line-height:1.55;font-family:var(--mono);margin:20px 0;box-shadow:0 2px 8px rgba(30,24,15,.15)}
.code-block .comment{color:#9a8e7e}
.collapsible-toggle{display:flex;align-items:center;gap:8px;cursor:pointer;padding:12px 0;font-family:var(--sans);font-size:12px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;color:var(--ink-ghost);border:none;background:none;transition:color .25s}
.collapsible-toggle:hover{color:var(--gold)}
.collapsible-toggle .arrow{transition:transform .3s;font-size:10px}
.collapsible-toggle.open .arrow{transform:rotate(90deg)}
.collapsible-content{max-height:0;overflow:hidden;transition:max-height .4s ease}
.collapsible-content.open{max-height:5000px}
.summary-box{background:var(--warm);border:1px solid var(--parchment);border-radius:6px;padding:24px 28px;margin:28px 0}
.summary-box .summary-label{font-family:var(--sans);font-size:10px;font-weight:700;letter-spacing:.12em;text-transform:uppercase;color:var(--gold);margin-bottom:10px}
.summary-box p{font-size:14px;line-height:1.75;color:var(--ink-faded);margin:0}
body.zh .step-flow li,body.zh .unpack-list .unpack-item{display:flex}
@media(max-width:700px){.concept-row{grid-template-columns:1fr}.unpack-item{flex-direction:column;gap:4px}.unpack-item .symbol{min-width:auto}}
</style>

<!-- ═══════════════════════════════════════════════════
     LEVEL 1 — WHAT IS CENTRALITY?
     ═══════════════════════════════════════════════════ -->

<div class="level-badge beginner" data-lang="en">Beginner</div>
<div class="level-badge beginner" data-lang="zh">入门</div>

<h2 id="what-is-centrality">
  <span data-lang="en">What Is Network Centrality?</span>
  <span data-lang="zh">什么是网络中心性？</span>
</h2>

<p data-lang="en">
Imagine an office where people ask each other for advice. Who's the "most important" person? It depends on what you mean by important. Is it the person everyone talks to? The person who connects different teams? The person connected to other influential people?
</p>

<p data-lang="zh">
想象一个办公室里的人互相请教。谁是"最重要的"人？这取决于你对"重要"的定义。是每个人都讨论的人？连接不同团队的人？与其他有影响力的人相连的人？
</p>

<div class="callout tip">
  <div class="callout-label" data-lang="en">The Key Insight</div>
  <div class="callout-label" data-lang="zh">关键洞察</div>
  <p data-lang="en"><strong>There is no single "most important" node.</strong> Different centrality measures answer different questions about structural importance. Each reveals a different role in the network.</p>
  <p data-lang="zh"><strong>没有单一的"最重要"节点。</strong>不同的中心性度量回答关于结构重要性的不同问题。每个都揭示了网络中的不同角色。</p>
</div>

<!-- Concept cards: Four measures -->
<div class="concept-row">
  <div class="concept-card">
    <div class="card-icon">D</div>
    <h4 data-lang="en">Degree</h4>
    <h4 data-lang="zh">度中心性</h4>
    <p data-lang="en">How many direct connections does this node have?</p>
    <p data-lang="zh">这个节点有多少直接连接？</p>
  </div>
  <div class="concept-card">
    <div class="card-icon">B</div>
    <h4 data-lang="en">Betweenness</h4>
    <h4 data-lang="zh">中介中心性</h4>
    <p data-lang="en">How often does this node lie on the shortest path between others?</p>
    <p data-lang="zh">这个节点多频繁地位于其他节点的最短路径上？</p>
  </div>
  <div class="concept-card">
    <div class="card-icon">C</div>
    <h4 data-lang="en">Closeness</h4>
    <h4 data-lang="zh">接近中心性</h4>
    <p data-lang="en">How quickly can this node reach all others?</p>
    <p data-lang="zh">这个节点能多快地到达所有其他节点？</p>
  </div>
  <div class="concept-card">
    <div class="card-icon">E</div>
    <h4 data-lang="en">Eigenvector</h4>
    <h4 data-lang="zh">特征向量中心性</h4>
    <p data-lang="en">Is this node connected to other well-connected nodes?</p>
    <p data-lang="zh">这个节点是否与其他连接良好的节点相连？</p>
  </div>
</div>

<!-- ═══════════════════════════════════════════════════
     LEVEL 2 — THE EXAMPLE
     ═══════════════════════════════════════════════════ -->

<div class="depth-divider"><span data-lang="en">A Small Example</span><span data-lang="zh">一个小例子</span></div>

<div class="level-badge beginner" data-lang="en">Beginner</div>
<div class="level-badge beginner" data-lang="zh">入门</div>

<h2 id="five-people">
  <span data-lang="en">Five People: Ranking by Each Measure</span>
  <span data-lang="zh">五个人：每个度量的排名</span>
</h2>

<p data-lang="en">
Let's look at a real example. Five colleagues: Alice, Bob, Carol, Dave, and Eve. Here's who asks whom for advice (directed ties):
</p>

<p data-lang="zh">
看一个真实的例子。五个同事：Alice、Bob、Carol、Dave 和 Eve。以下是谁找谁请教（有向关系）：
</p>

<div class="unpack-list">
  <div class="unpack-item">
    <div class="symbol">Alice</div>
    <div class="explain" data-lang="en">asks Bob and Carol</div>
    <div class="explain" data-lang="zh">请教 Bob 和 Carol</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">Bob</div>
    <div class="explain" data-lang="en">asks Carol and Dave</div>
    <div class="explain" data-lang="zh">请教 Carol 和 Dave</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">Carol</div>
    <div class="explain" data-lang="en">asks no one (expert!)</div>
    <div class="explain" data-lang="zh">不请教任何人（专家！）</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">Dave</div>
    <div class="explain" data-lang="en">asks Carol and Eve</div>
    <div class="explain" data-lang="zh">请教 Carol 和 Eve</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">Eve</div>
    <div class="explain" data-lang="en">asks Carol</div>
    <div class="explain" data-lang="zh">请教 Carol</div>
  </div>
</div>

<p data-lang="en">
Now compute each centrality measure. Who ranks first in each?
</p>

<p data-lang="zh">
现在计算每个中心性度量。每个中谁排在第一？
</p>

<div class="concept-row">
  <div class="concept-card">
    <div class="card-icon">D</div>
    <h4 data-lang="en">Degree</h4>
    <h4 data-lang="zh">度中心性</h4>
    <p data-lang="en"><strong>Carol (4 in-degree)</strong> — everyone asks her. Most connected.</p>
    <p data-lang="zh"><strong>Carol（4 个入度）</strong>——每个人都问她。最连接。</p>
  </div>
  <div class="concept-card">
    <div class="card-icon">B</div>
    <h4 data-lang="en">Betweenness</h4>
    <h4 data-lang="zh">中介中心性</h4>
    <p data-lang="en"><strong>Carol (also wins)</strong> — she's on the path between many pairs. Gatekeeper.</p>
    <p data-lang="zh"><strong>Carol（也赢了）</strong>——她在许多对之间的路径上。守门人。</p>
  </div>
  <div class="concept-card">
    <div class="card-icon">C</div>
    <h4 data-lang="en">Closeness</h4>
    <h4 data-lang="zh">接近中心性</h4>
    <p data-lang="en"><strong>Carol again</strong> — can reach everyone fastest. Central location.</p>
    <p data-lang="zh"><strong>再是 Carol</strong>——能最快到达所有人。中心位置。</p>
  </div>
  <div class="concept-card">
    <div class="card-icon">E</div>
    <h4 data-lang="en">Eigenvector</h4>
    <h4 data-lang="zh">特征向量中心性</h4>
    <p data-lang="en"><strong>Carol still!</strong> — connected to people who are themselves important. Prestige.</p>
    <p data-lang="zh"><strong>还是 Carol！</strong>——与本身重要的人相连。声望。</p>
  </div>
</div>

<div class="callout">
  <div class="callout-label" data-lang="en">Key observation</div>
  <div class="callout-label" data-lang="zh">关键观察</div>
  <p data-lang="en">In this network, Carol dominates all four measures because she's structurally central in every way: most connections, on most paths, closest to everyone, and connected to other important people. But in real networks, different people rank differently on different measures, revealing their distinct roles.</p>
  <p data-lang="zh">在这个网络中，Carol 在所有四个度量上都占主导地位，因为她在各种方式上都是结构中心：最多的连接、最多的路径、离每个人最近、与其他重要的人相连。但在真实网络中，不同的人在不同的度量上排名不同，揭示了他们的不同角色。</p>
</div>

<!-- ═══════════════════════════════════════════════════
     LEVEL 3 — THE FORMULAS
     ═══════════════════════════════════════════════════ -->

<div class="depth-divider"><span data-lang="en">The Mathematics</span><span data-lang="zh">数学</span></div>

<div class="level-badge intermediate" data-lang="en">Intermediate</div>
<div class="level-badge intermediate" data-lang="zh">进阶</div>

<h2 id="degree-formula">
  <span data-lang="en">Degree Centrality</span>
  <span data-lang="zh">度中心性</span>
</h2>

<p data-lang="en">
Degree centrality simply counts how many edges connect to a node. In social networks, it's the number of friends. In trade networks, it's the number of trading partners. Higher degree = more direct influence and access.
</p>

<p data-lang="zh">
度中心性只是简单地数一个节点有多少条边相连。在社交网络中，它是朋友的数量。在贸易网络中，它是贸易伙伴的数量。更高的度 = 更多的直接影响力和获取。
</p>

<div class="guide-formula">
C_D(v) = deg(v) / (n−1)
</div>

<div class="unpack-list">
  <div class="unpack-item">
    <div class="symbol">deg(v)</div>
    <div class="explain" data-lang="en">The count of edges touching node v. In directed networks, count both in-degree (ties pointing in) and out-degree (ties pointing out), or use one depending on context.</div>
    <div class="explain" data-lang="zh">接触节点 v 的边数。在有向网络中，计算入度（指向的关系）和出度（指出的关系），或根据情况使用一个。</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">n</div>
    <div class="explain" data-lang="en">Total number of nodes. Divided by (n−1) to normalize: the maximum possible degree for any node is (n−1), so the result ranges from 0 to 1.</div>
    <div class="explain" data-lang="zh">节点总数。除以 (n−1) 来归一化：任何节点的最大可能度是 (n−1)，所以结果范围是 0 到 1。</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">Example</div>
    <div class="explain" data-lang="en">Carol has 4 in-edges. With n=5 people, her degree centrality = 4/4 = 1.0 (maximum). Alice has 0 in-edges, so 0/4 = 0 (no one asks her).</div>
    <div class="explain" data-lang="zh">Carol 有 4 条入边。n=5 个人，她的度中心性 = 4/4 = 1.0（最大）。Alice 有 0 条入边，所以 0/4 = 0（没人问她）。</div>
  </div>
</div>

<div class="callout">
  <div class="callout-label" data-lang="en">Social meaning</div>
  <div class="callout-label" data-lang="zh">社会意义</div>
  <p data-lang="en">High-degree nodes are <strong>hubs</strong> — they have many direct contacts. In epidemiology, they're "super-spreaders." In organizations, they're connectors. In collaboration networks, they're prolific producers.</p>
  <p data-lang="zh">高度节点是<strong>中心</strong>——他们有许多直接接触。在流行病学中，他们是"超级传播者"。在组织中，他们是连接者。在合作网络中，他们是多产的生产者。</p>
</div>

<h2 id="betweenness-formula">
  <span data-lang="en">Betweenness Centrality</span>
  <span data-lang="zh">中介中心性</span>
</h2>

<p data-lang="en">
Betweenness asks: how often does this node lie on the shortest path between other pairs? If you remove this node, how many pairs would be disconnected or have to take a longer route? High betweenness = strategic importance as a broker.
</p>

<p data-lang="zh">
中介中心性问：这个节点多频繁地位于其他对的最短路径上？如果你删除这个节点，有多少对会断开或必须走更长的路线？高中介中心性 = 作为经纪人的战略重要性。
</p>

<div class="guide-formula">
C_B(v) = Σ σ_st(v) / σ_st
</div>

<div class="unpack-list">
  <div class="unpack-item">
    <div class="symbol">σ_st</div>
    <div class="explain" data-lang="en">The total number of shortest paths from node s to node t (across all pairs).</div>
    <div class="explain" data-lang="zh">从节点 s 到节点 t 的最短路径总数（跨所有对）。</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">σ_st(v)</div>
    <div class="explain" data-lang="en">The number of those shortest paths that pass through node v. If v is not on any shortest path between s and t, this is 0.</div>
    <div class="explain" data-lang="zh">这些最短路径中通过节点 v 的数量。如果 v 不在 s 和 t 之间的任何最短路径上，这是 0。</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">Sum over all s≠v≠t</div>
    <div class="explain" data-lang="en">Count this ratio for every possible pair of other nodes, then add them all up. Optionally normalize by dividing by the maximum possible value.</div>
    <div class="explain" data-lang="zh">对所有其他节点对计算这个比率，然后加起来。可选地通过除以最大可能值来归一化。</div>
  </div>
</div>

<div class="callout">
  <div class="callout-label" data-lang="en">Social meaning</div>
  <div class="callout-label" data-lang="zh">社会意义</div>
  <p data-lang="en">High-betweenness nodes are <strong>brokers</strong> or <strong>bridges</strong>. In organizational networks, they control information flow between departments. In social movements, they connect different ideological clusters. In supply chains, they're critical intermediaries — removing them breaks the network.</p>
  <p data-lang="zh">高中介节点是<strong>经纪人</strong>或<strong>桥梁</strong>。在组织网络中，它们控制部门间的信息流。在社会运动中，它们连接不同的意识形态集群。在供应链中，它们是关键中介——删除它们会破坏网络。</p>
</div>

<h2 id="closeness-formula">
  <span data-lang="en">Closeness Centrality</span>
  <span data-lang="zh">接近中心性</span>
</h2>

<p data-lang="en">
Closeness measures how quickly a node can reach all others. It's the inverse of the average distance. Nodes with short average distances to everyone else are "centrally located" and have fast access to information, resources, or can transmit widely.
</p>

<p data-lang="zh">
接近中心性测量节点能多快地到达所有其他节点。它是平均距离的倒数。与其他所有节点的平均距离短的节点"位于中心"，能够快速获取信息、资源或广泛传输。
</p>

<div class="guide-formula">
C_C(v) = (n−1) / Σ_u d(v,u)
</div>

<div class="unpack-list">
  <div class="unpack-item">
    <div class="symbol">d(v,u)</div>
    <div class="explain" data-lang="en">The length of the shortest path from v to u, measured in edge hops. If u is a direct neighbor, d=1. If you must go through two intermediaries, d=3.</div>
    <div class="explain" data-lang="zh">从 v 到 u 的最短路径长度，以边数衡量。如果 u 是直接邻居，d=1。如果必须通过两个中介，d=3。</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">Σ_u d(v,u)</div>
    <div class="explain" data-lang="en">Sum the distances to all other nodes. Shorter sums mean v is closer to everyone.</div>
    <div class="explain" data-lang="zh">对所有其他节点的距离求和。较短的和意味着 v 离每个人更近。</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">(n−1) / Σ</div>
    <div class="explain" data-lang="en">Divide by the sum to get the harmonic mean (roughly "average distance, inverted"). Ranges from 0 (isolated) to 1 (connected to all neighbors directly).</div>
    <div class="explain" data-lang="zh">除以总和得到调和平均数（大致"平均距离的倒数"）。范围从 0（孤立）到 1（直接连接到所有邻居）。</div>
  </div>
</div>

<div class="callout">
  <div class="callout-label" data-lang="en">Social meaning</div>
  <div class="callout-label" data-lang="zh">社会意义</div>
  <p data-lang="en">High-closeness nodes are <strong>centrally positioned</strong> — they spread information or disease rapidly. In knowledge networks, they have quick access to expertise. In logistics networks, they're efficient distribution hubs. In social networks, they're "in the thick of things."</p>
  <p data-lang="zh">高接近节点位置<strong>集中</strong>——它们快速传播信息或疾病。在知识网络中，它们能快速获得专业知识。在物流网络中，它们是高效的配送中心。在社交网络中，它们"处于事物的核心"。</p>
</div>

<h2 id="eigenvector-formula">
  <span data-lang="en">Eigenvector Centrality</span>
  <span data-lang="zh">特征向量中心性</span>
</h2>

<p data-lang="en">
Eigenvector centrality embodies a key insight: <strong>not all connections are equal</strong>. Being connected to important people makes you more important. It's a recursive definition: your importance depends on your neighbors' importance. This is computed as the eigenvector of the adjacency matrix.
</p>

<p data-lang="zh">
特征向量中心性体现了一个关键洞察：<strong>不是所有的连接都是平等的</strong>。与重要的人相连让你更重要。这是一个递归的定义：你的重要性取决于你邻居的重要性。这是通过邻接矩阵的特征向量计算的。
</p>

<div class="guide-formula">
x_i = (1/λ) Σ_j A_ij x_j
</div>

<div class="unpack-list">
  <div class="unpack-item">
    <div class="symbol">A_ij</div>
    <div class="explain" data-lang="en">Entry in the adjacency matrix: 1 if i and j are connected, 0 otherwise.</div>
    <div class="explain" data-lang="zh">邻接矩阵中的条目：如果 i 和 j 连接，则为 1，否则为 0。</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">x_j</div>
    <div class="explain" data-lang="en">The centrality score of node j. The formula says: node i's score equals the sum of all its neighbors' scores (weighted by the matrix).</div>
    <div class="explain" data-lang="zh">节点 j 的中心性得分。公式说：节点 i 的得分等于其所有邻居的得分之和（由矩阵加权）。</div>
  </div>
  <div class="unpack-item">
    <div class="symbol">λ</div>
    <div class="explain" data-lang="en">The largest eigenvalue of A. This is the normalization constant (roughly the "scaling factor"). Solved via linear algebra.</div>
    <div class="explain" data-lang="zh">A 的最大特征值。这是归一化常数（大致是"缩放因子"）。通过线性代数求解。</div>
  </div>
</div>

<div class="callout">
  <div class="callout-label" data-lang="en">Social meaning</div>
  <div class="callout-label" data-lang="zh">社会意义</div>
  <p data-lang="en">High-eigenvector nodes have <strong>prestige</strong> or <strong>status</strong>. In citation networks, highly-cited papers and their citers both rank high. In political networks, alignment with powerful actors amplifies your own power. Google's PageRank is a variant of this idea: web pages linked from important pages are themselves important.</p>
  <p data-lang="zh">高特征向量节点有<strong>声望</strong>或<strong>地位</strong>。在引文网络中，被高度引用的论文及其引用者都排名靠前。在政治网络中，与强大参与者的一致性放大了你自己的权力。谷歌的 PageRank 是这个想法的一个变体：来自重要页面的链接的网页本身很重要。</p>
</div>

<!-- ═══════════════════════════════════════════════════
     LEVEL 4 — R IMPLEMENTATION (collapsible)
     ═══════════════════════════════════════════════════ -->

<div class="depth-divider"><span data-lang="en">Implementation</span><span data-lang="zh">实现</span></div>

<div class="level-badge intermediate" data-lang="en">Intermediate</div>
<div class="level-badge intermediate" data-lang="zh">进阶</div>

<h2 id="r-implementation">
  <span data-lang="en">Computing Centrality in R with igraph</span>
  <span data-lang="zh">在 R 中用 igraph 计算中心性</span>
</h2>

<p data-lang="en">
The <code>igraph</code> package in R provides fast implementations of all four centrality measures. Here's a complete example using our five-person advice network.
</p>

<p data-lang="zh">
R 中的 <code>igraph</code> 包提供了所有四个中心性度量的快速实现。这是一个使用我们五人请教网络的完整示例。
</p>

<button class="collapsible-toggle" onclick="this.classList.toggle('open');this.nextElementSibling.classList.toggle('open')">
  <span class="arrow">▶</span>
  <span data-lang="en">Show R code example</span>
  <span data-lang="zh">显示 R 代码示例</span>
</button>
<div class="collapsible-content">

<pre class="code-block"><span class="comment"># Install if needed: install.packages("igraph")</span>
library(igraph)

<span class="comment"># Create the network from our example</span>
edges &lt;- data.frame(
  from = c("Alice", "Alice", "Bob", "Bob", "Dave", "Dave", "Eve"),
  to = c("Bob", "Carol", "Carol", "Dave", "Carol", "Eve", "Carol")
)

g &lt;- graph_from_data_frame(edges, directed = TRUE)

<span class="comment"># Compute all four centrality measures</span>
deg &lt;- degree(g, normalized = TRUE)
bet &lt;- betweenness(g, normalized = TRUE)
clo &lt;- closeness(g, normalized = TRUE)
eig &lt;- eigen_centrality(g)$vector

<span class="comment"># Put them in a data frame for easy viewing</span>
centrality_df &lt;- data.frame(
  node = names(deg),
  degree = round(deg, 3),
  betweenness = round(bet, 3),
  closeness = round(clo, 3),
  eigenvector = round(eig, 3)
)

<span class="comment"># View the results — Carol dominates all measures</span>
print(centrality_df)

<span class="comment"># Visualize: node size by degree, color by betweenness</span>
plot(g,
     vertex.size = deg * 30 + 5,
     vertex.color = rgb(bet, 0.3, 1 - bet),
     vertex.label = V(g)$name,
     edge.arrow.size = 0.6,
     edge.width = 2)
</pre>

</div><!-- end collapsible -->

<div class="callout tip">
  <div class="callout-label" data-lang="en">Key functions</div>
  <div class="callout-label" data-lang="zh">关键函数</div>
  <p data-lang="en"><strong>degree(g)</strong> counts edges. <strong>betweenness(g)</strong> counts shortest paths. <strong>closeness(g)</strong> computes harmonic mean of distances. <strong>eigen_centrality(g)</strong> returns the eigenvector (access it with $vector). Use <strong>normalized = TRUE</strong> to scale all to [0,1] for comparison.</strong></p>
  <p data-lang="zh"><strong>degree(g)</strong> 计算边。<strong>betweenness(g)</strong> 计算最短路径。<strong>closeness(g)</strong> 计算距离的调和平均数。<strong>eigen_centrality(g)</strong> 返回特征向量（用 $vector 访问）。使用 <strong>normalized = TRUE</strong> 将所有缩放到 [0,1] 以进行比较。</strong></p>
</div>

<!-- ═══════════════════════════════════════════════════
     SUMMARY
     ═══════════════════════════════════════════════════ -->

<div class="summary-box">
  <div class="summary-label" data-lang="en">Summary: Four Perspectives on Importance</div>
  <div class="summary-label" data-lang="zh">总结：重要性的四种视角</div>
  <p data-lang="en">
  <strong>Degree:</strong> How many direct connections? (popularity, hub status)<br>
  <strong>Betweenness:</strong> How often on shortest paths? (brokerage, control)<br>
  <strong>Closeness:</strong> How fast to reach all others? (central position, efficiency)<br>
  <strong>Eigenvector:</strong> Connected to other important nodes? (prestige, status)
  </p>
  <p data-lang="zh">
  <strong>度：</strong>有多少直接连接？（人气、中心地位）<br>
  <strong>中介：</strong>多频繁在最短路径上？（经纪、控制）<br>
  <strong>接近：</strong>多快到达所有其他节点？（中心位置、效率）<br>
  <strong>特征向量：</strong>与其他重要节点相连？（声望、地位）
  </p>
  <p data-lang="en" style="margin-top:14px;color:var(--ink-ghost);font-size:13px;">
  Different questions → different rankings. Use the measure that matches your research question. In the same network, different nodes can be central on different measures, revealing their distinct structural roles.
  </p>
  <p data-lang="zh" style="margin-top:14px;color:var(--ink-ghost);font-size:13px;">
  不同的问题 → 不同的排名。使用与你的研究问题相匹配的度量。在同一个网络中，不同的节点可以在不同的度量上是中心的，揭示了它们不同的结构角色。
  </p>
</div>

<script>
document.querySelectorAll('.collapsible-toggle').forEach(function(btn){
  btn.addEventListener('click',function(){
    this.classList.toggle('open');
    this.nextElementSibling.classList.toggle('open');
  });
});
</script>
