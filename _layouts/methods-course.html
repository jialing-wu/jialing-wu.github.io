<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ page.title }} — Research Methods Notebook</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500&family=EB+Garamond:ital,wght@0,400;0,500;1,400&family=Caveat:wght@400;500&family=IBM+Plex+Sans:wght@300;400;500&family=IBM+Plex+Mono:wght@400;500&family=Noto+Serif+SC:wght@300;400;500;600&family=Noto+Sans+SC:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/methods/style.css">
{% if page.mathjax %}
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
{% endif %}
<style>
/* ── TOC panel ──────────────────────────────────────── */
.page-toc{
  position:fixed;
  top:72px;
  right:0;
  width:210px;
  max-height:calc(100vh - 90px);
  overflow-y:auto;
  padding:16px 20px 16px 16px;
  font-family:var(--sans);
  font-size:12px;
  line-height:1.5;
  border-left:1px solid var(--parchment);
  background:var(--paper);
}
.page-toc::-webkit-scrollbar{width:3px}
.page-toc::-webkit-scrollbar-thumb{background:var(--parchment);border-radius:2px}
.toc-label{
  font-size:10px;font-weight:600;letter-spacing:.1em;
  text-transform:uppercase;color:var(--gold);
  margin-bottom:10px;
}
.toc-list{list-style:none;padding:0;margin:0}
.toc-item{margin-bottom:2px}
.toc-item a{
  display:block;
  color:var(--ink-ghost);
  text-decoration:none;
  padding:3px 0 3px 8px;
  border-left:2px solid transparent;
  transition:color .15s, border-color .15s;
  line-height:1.4;
}
.toc-item a:hover{color:var(--ink);border-left-color:var(--parchment)}
.toc-item.active a{color:var(--ink);border-left-color:var(--red)}
.toc-h3{padding-left:10px}
.toc-h3 a{font-size:11px;padding-left:18px}

/* Reserve right space for TOC at wide viewports */
@media(min-width:1300px){
  .content{padding-right:240px;max-width:1060px}
}
@media(max-width:1300px){
  .page-toc{display:none}
}
</style>
</head>
<body class="en">
{% include methods/scripts.html %}
<div class="layout">
  {% include methods/sidebar.html %}
  <div class="main">
    {% include methods/topbar.html %}
    <div class="content method-page">
      {{ content }}
    </div>
  </div>
</div>
<script>
/* Scroll reveal — fade-in cards and sections as they enter viewport */
(function(){
  var obs = new IntersectionObserver(function(entries){
    entries.forEach(function(e){
      if(e.isIntersecting){
        e.target.classList.add('visible');
        e.target.style.transitionDelay = '0s';
      }
    });
  },{threshold:0.08});
  var els = document.querySelectorAll('.reveal,.intro-card,.card,.module-card,.feature-block,.method-section,.profile-card,.sw-pill');
  var delay = 0;
  els.forEach(function(el){
    el.style.transitionDelay = (delay * 0.06) + 's';
    obs.observe(el);
    delay++;
    if(delay > 12) delay = 0; /* reset stagger for new viewport batches */
  });
})();
</script>
</body>
</html>
