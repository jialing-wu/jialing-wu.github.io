:root {
  --paper:#F8F4EC;--warm:#F2EBDE;--parchment:#DED4C0;--tea:#C4B599;
  --leather:#8B7355;--ink:#1E180F;--ink-soft:#3A3225;--ink-faded:#6B5F4F;
  --ink-ghost:#9A8E7E;--red:#B5372A;--gold:#C2993D;--gold-soft:#D4B36A;
  --display:'Cormorant Garamond','Noto Serif SC',Georgia,serif;
  --body:'EB Garamond','Noto Serif SC',Georgia,serif;
  --hand:'Caveat',cursive;
  --sans:'IBM Plex Sans','Noto Sans SC',sans-serif;
  --mono:'IBM Plex Mono','Menlo',monospace;
  --sidebar-w:260px;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{background:var(--paper);color:var(--ink-soft);font-family:var(--body);font-size:16px;line-height:1.75;-webkit-font-smoothing:antialiased}
::selection{background:var(--gold-soft);color:var(--ink)}

/* LAYOUT: sidebar + main */
.layout{display:flex;min-height:100vh}

/* SIDEBAR */
.sidebar{width:var(--sidebar-w);position:fixed;top:0;left:0;bottom:0;background:var(--ink);overflow-y:auto;padding:30px 0;z-index:100;transition:transform .3s}
.sidebar::-webkit-scrollbar{width:4px}
.sidebar::-webkit-scrollbar-thumb{background:rgba(248,244,236,.15);border-radius:2px}

.sb-brand{display:block;padding:0 24px 24px;text-decoration:none;border-bottom:1px solid rgba(196,181,153,.1);margin-bottom:20px}
.sb-brand h2{font-family:var(--display);font-size:20px;font-weight:400;color:var(--paper);line-height:1.3}
.sb-brand h2 span{color:var(--gold)}
.sb-brand .sb-sub{font-family:var(--sans);font-size:10px;letter-spacing:.12em;text-transform:uppercase;color:rgba(248,244,236,.7);margin-top:5px}

.sb-cat{font-family:var(--sans);font-size:10.5px;font-weight:600;letter-spacing:.14em;text-transform:uppercase;color:var(--gold);padding:18px 24px 8px}
.sb-subcat{font-family:var(--sans);font-size:9.5px;font-weight:500;letter-spacing:.1em;text-transform:uppercase;color:rgba(248,244,236,.45);padding:10px 24px 6px 34px}

.sb-link{display:flex;align-items:center;gap:10px;padding:10px 24px;text-decoration:none;transition:all .2s;border-left:3px solid transparent;font-family:var(--body);font-size:15.5px;color:rgba(248,244,236,.92)}
.sb-link:hover{color:#fff;background:rgba(248,244,236,.08);border-left-color:var(--gold)}
.sb-link.active{color:#fff;background:rgba(248,244,236,.1);border-left-color:var(--red);font-weight:500}
.sb-num{font-family:var(--sans);font-size:11px;color:var(--gold);min-width:20px;opacity:1}
.sb-link.active .sb-num{opacity:1}

.sb-footer{padding:20px 24px;margin-top:24px;border-top:1px solid rgba(196,181,153,.1)}
.sb-footer a{font-family:var(--sans);font-size:11px;letter-spacing:.08em;text-transform:uppercase;color:rgba(248,244,236,.7);text-decoration:none;transition:color .3s;display:block;padding:5px 0}
.sb-footer a:hover{color:var(--gold)}

/* MAIN CONTENT */
.main{margin-left:var(--sidebar-w);flex:1;min-width:0}

/* TOP BAR (mobile + breadcrumb) */
.topbar{position:sticky;top:0;background:rgba(248,244,236,.95);backdrop-filter:blur(16px);padding:14px 40px;display:flex;align-items:center;gap:12px;z-index:50;border-bottom:1px solid var(--parchment)}
.topbar-lang{margin-left:auto;display:flex;gap:4px}
.topbar-lang .lang-btn{font-family:var(--sans);font-size:11px;padding:3px 10px;border:1px solid var(--parchment);border-radius:3px;background:var(--paper);color:var(--ink-ghost);cursor:pointer;transition:all .2s}
.topbar-lang .lang-btn.active{background:var(--ink);color:var(--paper);border-color:var(--ink)}
.topbar-lang .lang-btn:hover{border-color:var(--tea)}
.menu-toggle{display:none;background:none;border:none;cursor:pointer;width:24px;height:18px;position:relative}
.menu-toggle span,.menu-toggle span::before,.menu-toggle span::after{display:block;width:100%;height:1.5px;background:var(--ink-soft);position:absolute;transition:all .3s}
.menu-toggle span{top:50%;transform:translateY(-50%)}
.menu-toggle span::before{content:'';top:-6px}
.menu-toggle span::after{content:'';top:6px}
.breadcrumb{font-family:var(--sans);font-size:11px;color:var(--ink-ghost);letter-spacing:.04em}
.breadcrumb a{color:var(--ink-ghost);text-decoration:none;transition:color .3s}
.breadcrumb a:hover{color:var(--red)}
.breadcrumb .sep{margin:0 6px;opacity:.5}

/* CONTENT AREA */
.content{max-width:780px;padding:40px 48px 64px}

/* BILINGUAL TOGGLE */
[data-lang="zh"]{display:none}
body.zh [data-lang="zh"]{display:block}
body.zh [data-lang="en"]{display:none}

/* INDEX PAGE */
.idx-header{margin-bottom:40px}
.idx-header .tag{font-family:var(--hand);font-size:15px;color:var(--red);margin-bottom:4px}
.idx-header h1{font-family:var(--display);font-size:44px;font-weight:300;color:var(--ink);letter-spacing:-.02em;margin-bottom:10px}
.idx-header p{font-size:17px;color:var(--ink-faded);max-width:580px;line-height:1.75;margin-bottom:10px}
.idx-header a{color:var(--red);text-decoration:underline;text-underline-offset:3px}
.idx-header .highlight{color:var(--red)}
.idx-header .author-line{text-align:right;font-family:var(--display);font-size:18px;color:var(--ink);margin-top:16px}
.idx-header .author-title{font-family:var(--sans);font-size:12px;letter-spacing:.06em;color:var(--ink-ghost)}
.btn-row{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}
.site-btn{display:inline-block;font-family:var(--sans);font-size:12px;font-weight:500;letter-spacing:.08em;text-transform:uppercase;color:var(--red);border:1px solid var(--red);padding:8px 20px;text-decoration:none;transition:all .3s}
.site-btn:hover{background:var(--red);color:var(--paper)}

/* INDEX CARDS */
.cat-label{font-family:var(--sans);font-size:10px;font-weight:600;letter-spacing:.14em;text-transform:uppercase;color:var(--red);margin:36px 0 14px;display:flex;align-items:center;gap:8px}
.cat-label::after{content:'';flex:1;height:1px;background:var(--parchment)}
.m-list{display:flex;flex-direction:column;gap:2px}
.m-card{display:flex;align-items:baseline;gap:14px;padding:14px 18px;border-left:3px solid var(--parchment);text-decoration:none;transition:all .3s}
.m-card:hover{border-left-color:var(--red);background:var(--warm)}
.m-num{font-family:var(--sans);font-size:10px;font-weight:500;color:var(--gold);min-width:22px}
.m-info{flex:1}
.m-title{font-family:var(--display);font-size:21px;font-weight:500;color:var(--ink);line-height:1.3}
.m-desc{font-size:14.5px;color:var(--ink-ghost);margin-top:3px}
.m-tags{display:flex;gap:6px;margin-top:6px}
.m-tag{font-family:var(--sans);font-size:10px;color:var(--leather);padding:2px 10px;background:var(--warm);border-radius:12px;border:1px solid rgba(196,181,153,.2)}
.m-arrow{font-family:var(--sans);font-size:12px;color:var(--gold);opacity:0;transition:opacity .3s}
.m-card:hover .m-arrow{opacity:1}

/* METHOD DETAIL PAGE */
.method-header{margin-bottom:32px}
.method-header h1{font-family:var(--display);font-size:38px;font-weight:400;color:var(--ink);margin-bottom:8px}
.method-meta{font-family:var(--sans);font-size:11px;letter-spacing:.1em;text-transform:uppercase;color:var(--gold)}

/* CONTENT SECTIONS */
.section{margin-bottom:32px}
.section h2{font-family:var(--display);font-size:26px;font-weight:500;color:var(--ink);margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--parchment)}
.section h3{font-family:var(--display);font-size:20px;font-weight:500;color:var(--ink-soft);margin:22px 0 10px}
.section p{font-size:17px;line-height:1.8;color:var(--ink-faded);margin-bottom:14px}
.section ul,.section ol{padding-left:26px;margin-bottom:14px}
.section li{font-size:16px;line-height:1.75;color:var(--ink-faded);margin-bottom:5px}
.section li strong{color:var(--ink-soft)}
.section a{color:var(--red);text-decoration:none;border-bottom:1px solid var(--red);padding-bottom:1px;transition:opacity .3s}
.section a:hover{opacity:.7}

/* CODE */
pre{background:var(--ink);color:rgba(248,244,236,.85);padding:20px 24px;border-radius:4px;overflow-x:auto;margin:16px 0;font-family:var(--mono);font-size:14px;line-height:1.7}
pre .comment{color:rgba(194,153,61,.7)}
pre .keyword{color:#E06C75}
pre .string{color:#98C379}
pre .func{color:#61AFEF}
code{font-family:var(--mono);font-size:14px;background:var(--warm);padding:2px 7px;border-radius:3px;color:var(--ink-soft)}
pre code{background:none;padding:0;color:inherit}

/* INFO BOX */
.info-box{border-left:3px solid var(--gold);background:var(--warm);padding:16px 20px;margin:16px 0;border-radius:0 4px 4px 0}
.info-box .label{font-family:var(--sans);font-size:11px;font-weight:600;letter-spacing:.1em;text-transform:uppercase;color:var(--gold);margin-bottom:5px}
.info-box p{font-size:15px;line-height:1.7;margin-bottom:0}

/* ARTICLE EXAMPLE BOX */
.article-box{border:1px solid var(--parchment);padding:20px 24px;margin:12px 0 24px;background:var(--warm);border-radius:4px}
.article-cite{font-family:var(--body);font-size:14px;line-height:1.6;color:var(--ink-ghost);margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid rgba(222,212,192,.4)}
.article-cite em{font-style:italic}
.article-box p{font-size:16px;line-height:1.8;color:var(--ink-faded);margin-bottom:10px}
.article-method{font-family:var(--sans);font-size:12px;font-weight:500;letter-spacing:.06em;color:var(--red);margin-top:8px}

/* MATERIALS */
.materials{border:1px solid var(--parchment);padding:18px 22px;margin:24px 0;background:var(--paper)}
.materials h3{font-family:var(--sans);font-size:10px;font-weight:600;letter-spacing:.12em;text-transform:uppercase;color:var(--red);margin:0 0 12px}
.mat-item{display:flex;align-items:center;gap:10px;padding:7px 0;border-bottom:1px solid rgba(222,212,192,.4)}
.mat-item:last-child{border-bottom:none}
.mat-icon{font-size:14px}
.mat-link{font-family:var(--body);font-size:15px;color:var(--red);text-decoration:none;border-bottom:1px solid transparent;transition:border-color .3s}
.mat-link:hover{border-bottom-color:var(--red)}
.mat-note{font-family:var(--sans);font-size:11px;color:var(--ink-ghost);margin-left:auto}

/* PREV/NEXT NAV */
.page-nav{display:flex;gap:16px;margin-top:48px;padding-top:24px;border-top:1px solid var(--parchment)}
.page-nav a{flex:1;padding:14px 18px;border:1px solid var(--parchment);text-decoration:none;transition:all .3s}
.page-nav a:hover{border-color:var(--gold);background:var(--warm)}
.page-nav .nav-label{font-family:var(--sans);font-size:9px;letter-spacing:.12em;text-transform:uppercase;color:var(--gold);margin-bottom:4px}
.page-nav .nav-title{font-family:var(--display);font-size:16px;color:var(--ink)}
.page-nav .next{text-align:right}

/* === VISUAL DESIGN COMPONENTS === */

/* TWO-COLUMN COMPARISON */
.compare-grid{display:grid;grid-template-columns:1fr 1fr;gap:0;margin:20px 0;border:1px solid var(--parchment);border-radius:4px;overflow:hidden}
.compare-col{padding:24px}
.compare-col:first-child{border-right:1px solid var(--parchment)}
.compare-col.alt{background:var(--warm)}
.compare-label{font-family:var(--sans);font-size:10px;font-weight:600;letter-spacing:.12em;text-transform:uppercase;color:var(--red);margin-bottom:12px}
.compare-col.alt .compare-label{color:var(--gold)}
.compare-col h3{font-family:var(--display);font-size:20px;font-weight:500;color:var(--ink);margin-bottom:10px}
.compare-col p{font-size:14.5px;line-height:1.7;color:var(--ink-faded);margin-bottom:8px}
.compare-col .example{font-family:var(--body);font-size:13.5px;font-style:italic;color:var(--ink-ghost);border-top:1px solid rgba(222,212,192,.4);padding-top:10px;margin-top:10px}
.compare-footer{grid-column:1/-1;background:var(--ink);color:rgba(248,244,236,.85);padding:12px 24px;font-family:var(--sans);font-size:12.5px;text-align:center;letter-spacing:.02em}

/* THREE-COLUMN CARDS */
.card-row{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin:20px 0}
.card{border:1px solid var(--parchment);border-radius:4px;padding:20px;background:var(--paper);transition:all .3s}
.card.highlight{background:var(--ink);color:rgba(248,244,236,.85);border-color:var(--ink)}
.card-tag{font-family:var(--sans);font-size:9px;font-weight:600;letter-spacing:.12em;text-transform:uppercase;color:var(--gold);margin-bottom:8px}
.card h4{font-family:var(--display);font-size:19px;font-weight:500;color:var(--ink);margin-bottom:10px}
.card.highlight h4{color:var(--paper)}
.card p,.card li{font-size:13.5px;line-height:1.65;color:var(--ink-faded);margin-bottom:4px}
.card.highlight p,.card.highlight li{color:rgba(248,244,236,.75)}
.card ul{padding-left:16px;margin:0;list-style:none}
.card li::before{content:'Â·';color:var(--gold);font-weight:700;margin-right:6px}
.card.highlight li::before{color:var(--gold-soft)}

/* NUMBERED FEATURE BLOCKS */
.feature-block{display:flex;gap:20px;margin:20px 0;padding:24px;border:1px solid var(--parchment);border-radius:4px;background:var(--paper)}
.feature-num{font-family:var(--sans);font-size:28px;font-weight:300;color:var(--red);line-height:1;min-width:36px}
.feature-body h4{font-family:var(--display);font-size:19px;font-weight:500;color:var(--ink);margin-bottom:8px}
.feature-body p{font-size:14.5px;line-height:1.7;color:var(--ink-faded);margin-bottom:0}
.feature-body .example-text{font-size:13px;color:var(--ink-ghost);background:var(--warm);padding:10px 14px;border-radius:3px;margin-top:10px;line-height:1.6}

/* WORKFLOW / STEP FLOW */
.flow{display:flex;align-items:flex-start;gap:0;margin:24px 0;overflow-x:auto}
.flow-step{flex:1;text-align:center;position:relative;padding:0 8px}
.flow-num{width:36px;height:36px;border-radius:50%;background:var(--ink);color:var(--paper);font-family:var(--sans);font-size:13px;font-weight:500;display:inline-flex;align-items:center;justify-content:center;margin-bottom:8px}
.flow-step.active .flow-num{background:var(--red)}
.flow-title{font-family:var(--sans);font-size:11px;font-weight:600;letter-spacing:.04em;color:var(--ink);margin-bottom:4px;line-height:1.3}
.flow-desc{font-size:12px;color:var(--ink-ghost);line-height:1.5}
.flow-arrow{color:var(--parchment);font-size:18px;margin-top:8px;flex-shrink:0}

/* PROFILE / STAT CARDS */
.profile-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px;margin:20px 0}
.profile-card{border:1px solid var(--parchment);border-radius:4px;padding:20px;background:var(--paper);position:relative;overflow:hidden}
.profile-card::before{content:'';position:absolute;top:0;left:0;width:4px;height:100%;background:var(--parchment)}
.profile-card.p1::before{background:var(--ink-ghost)}
.profile-card.p2::before{background:var(--leather)}
.profile-card.p3::before{background:var(--red)}
.profile-card.p4::before{background:var(--gold)}
.profile-pct{font-family:var(--sans);font-size:28px;font-weight:300;color:var(--red);line-height:1;margin-bottom:6px}
.profile-card.p1 .profile-pct{color:var(--ink-ghost)}
.profile-card.p2 .profile-pct{color:var(--leather)}
.profile-card.p3 .profile-pct{color:var(--red)}
.profile-card.p4 .profile-pct{color:var(--gold)}
.profile-name{font-family:var(--sans);font-size:11px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:var(--ink);margin-bottom:6px}
.profile-desc{font-size:13.5px;line-height:1.6;color:var(--ink-faded)}
.profile-warn{font-size:11px;color:var(--red);margin-top:6px;font-family:var(--sans)}

/* FINDING BLOCKS */
.finding{border-left:3px solid var(--red);padding:14px 18px;margin:12px 0;background:rgba(181,55,42,.04);border-radius:0 4px 4px 0}
.finding h4{font-family:var(--sans);font-size:12px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;color:var(--red);margin-bottom:6px}
.finding p{font-size:14.5px;line-height:1.7;color:var(--ink-faded);margin-bottom:0}

/* REFERENCE LIST */
.ref-list{list-style:none;padding:0;margin:12px 0}
.ref-list li{font-size:14px;line-height:1.65;color:var(--ink-faded);padding:8px 0;border-bottom:1px solid rgba(222,212,192,.3)}
.ref-list li:last-child{border-bottom:none}
.ref-list .ref-tag{display:inline-block;font-family:var(--sans);font-size:9px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:var(--paper);background:var(--ink-ghost);padding:2px 8px;border-radius:2px;margin-right:8px;vertical-align:middle}
.ref-list .ref-tag.beginner{background:var(--gold)}
.ref-list .ref-tag.fit{background:var(--red)}
.ref-list .ref-tag.applied{background:var(--leather)}
.ref-list a{color:var(--red);font-size:12px;text-decoration:none;word-break:break-all}
.ref-list a:hover{text-decoration:underline}
.article-cite a{color:var(--red);font-size:12px;text-decoration:none;word-break:break-all}
.article-cite a:hover{text-decoration:underline}

/* FOOTNOTE / NOTE */
.note{font-family:var(--sans);font-size:11px;color:var(--ink-ghost);margin-top:6px;font-style:italic}

/* FIGURES */
.figure{margin:24px 0;text-align:center}
.figure img{max-width:100%;border:1px solid var(--parchment);border-radius:4px;background:#fff;padding:16px}
.figure-cap{font-family:var(--sans);font-size:11.5px;color:var(--ink-ghost);margin-top:8px;line-height:1.5}
.figure-cap strong{color:var(--ink-faded);font-weight:600}

/* SECTION DIVIDER */
.section-divider{border:none;border-top:1px solid var(--parchment);margin:40px 0}

/* INTRO SUBTITLE */
.method-header .subtitle{font-family:var(--body);font-size:17px;color:var(--ink-faded);margin-top:6px;font-style:italic}

/* SOFTWARE PILLS */
.sw-row{display:flex;gap:12px;margin:14px 0;flex-wrap:wrap}
.sw-pill{flex:1;min-width:180px;border:1px solid var(--parchment);border-radius:4px;padding:14px 18px}
.sw-pill h4{font-family:var(--sans);font-size:12px;font-weight:600;color:var(--ink);margin-bottom:4px}
.sw-pill p{font-size:12.5px;line-height:1.5;color:var(--ink-ghost);margin:0}
.sw-pill.gold{border-left:3px solid var(--gold)}

/* OVERLAY for mobile */
.sidebar-overlay{display:none;position:fixed;inset:0;background:rgba(30,24,15,.4);z-index:90}

/* RESPONSIVE */
@media(max-width:860px){
  .sidebar{transform:translateX(-100%)}
  .sidebar.open{transform:translateX(0)}
  .sidebar-overlay.show{display:block}
  .main{margin-left:0}
  .menu-toggle{display:block}
  .content{padding:28px 24px 48px}
  .idx-header h1{font-size:34px}
  .method-header h1{font-size:30px}
  .section p{font-size:16px}
  .section li{font-size:15px}
  .compare-grid{grid-template-columns:1fr}
  .compare-col:first-child{border-right:none;border-bottom:1px solid var(--parchment)}
  .card-row{grid-template-columns:1fr}
  .flow{flex-wrap:wrap;justify-content:center}
  .flow-arrow{display:none}
  .profile-grid{grid-template-columns:1fr}
  .sw-row{flex-direction:column}
  .feature-block{flex-direction:column;gap:12px}
}
