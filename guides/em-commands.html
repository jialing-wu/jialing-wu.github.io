<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commands Reference Â· Empirical Modeling</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400&family=EB+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400&family=IBM+Plex+Mono:wght@400;500&family=IBM+Plex+Sans:wght@400;500;600&family=Noto+Serif+SC:wght@400;500;600&family=Noto+Sans+SC:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --paper: #F8F4EC;
            --warm: #F2EBDE;
            --parchment: #DED4C0;
            --tea: #C4B599;
            --leather: #8B7355;
            --ink: #1E180F;
            --ink-soft: #3A3225;
            --ink-faded: #6B5F4F;
            --ink-ghost: #9A8E7E;
            --red: #B5372A;
            --gold: #C2993D;
            --gold-soft: #D4B36A;
            --display: 'Cormorant Garamond', serif;
            --body: 'EB Garamond', serif;
            --sans: 'IBM Plex Sans', sans-serif;
            --mono: 'IBM Plex Mono', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--paper);
            color: var(--ink);
            font-family: var(--body);
            font-size: 16px;
            line-height: 1.8;
        }

        body.zh {
            font-family: 'Noto Serif SC', var(--body);
        }

        body.zh .en {
            display: none;
        }

        body:not(.zh) .zh {
            display: none;
        }

        .container {
            max-width: 780px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        header {
            margin-bottom: 3rem;
            border-bottom: 1px solid var(--parchment);
            padding-bottom: 2rem;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .back-link {
            font-family: var(--sans);
            font-size: 0.875rem;
            text-decoration: none;
            color: var(--tea);
            transition: color 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-link:hover {
            color: var(--gold);
        }

        .back-link::before {
            content: 'â†';
        }

        .lang-toggle {
            display: flex;
            background-color: var(--warm);
            border: 1px solid var(--parchment);
            border-radius: 4px;
            overflow: hidden;
            font-family: var(--sans);
            font-size: 0.875rem;
        }

        .lang-toggle button {
            padding: 0.5rem 1rem;
            border: none;
            background: none;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--ink-faded);
            font-weight: 500;
        }

        .lang-toggle button.active {
            background-color: var(--paper);
            color: var(--ink);
            border-bottom: 2px solid var(--gold);
        }

        .lang-toggle button:hover:not(.active) {
            color: var(--ink-soft);
        }

        h1 {
            font-family: var(--display);
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--ink);
        }

        .subtitle {
            font-family: var(--sans);
            font-size: 0.95rem;
            color: var(--ink-faded);
            letter-spacing: 0.08em;
            text-transform: uppercase;
            font-weight: 500;
        }

        nav.toc {
            margin: 2.5rem 0;
            padding: 1.5rem;
            background-color: var(--warm);
            border-left: 3px solid var(--gold);
            border-radius: 2px;
        }

        .toc-title {
            font-family: var(--sans);
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--ink-faded);
            margin-bottom: 1rem;
        }

        nav.toc ul {
            list-style: none;
        }

        nav.toc li {
            margin: 0.5rem 0;
        }

        nav.toc a {
            color: var(--leather);
            text-decoration: none;
            font-family: var(--sans);
            font-size: 0.95rem;
            transition: color 0.2s;
        }

        nav.toc a:hover {
            color: var(--gold);
        }

        section {
            margin: 3rem 0;
        }

        h2 {
            font-family: var(--display);
            font-size: 1.8rem;
            font-weight: 600;
            margin: 2.5rem 0 1.5rem 0;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--parchment);
            color: var(--ink);
        }

        h3 {
            font-family: var(--display);
            font-size: 1.3rem;
            font-weight: 500;
            margin: 1.5rem 0 0.75rem 0;
            color: var(--ink-soft);
        }

        .command-group {
            margin: 1.75rem 0;
            padding: 1.25rem;
            background-color: var(--warm);
            border: 1px solid var(--parchment);
            border-radius: 3px;
        }

        .command-group:hover {
            border-color: var(--tea);
            box-shadow: 0 2px 8px rgba(196, 181, 153, 0.15);
        }

        .command-label {
            font-family: var(--sans);
            font-size: 0.875rem;
            color: var(--ink-faded);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .software-label {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background-color: var(--paper);
            border: 1px solid var(--parchment);
            border-radius: 3px;
            font-family: var(--sans);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: var(--leather);
            margin-bottom: 0.75rem;
        }

        .software-label.stata {
            border-color: var(--gold);
            color: var(--gold);
        }

        .software-label.r {
            border-color: var(--red);
            color: var(--red);
        }

        .command-code {
            font-family: var(--mono);
            font-size: 0.95rem;
            background-color: var(--paper);
            padding: 1rem;
            border-left: 3px solid var(--tea);
            border-radius: 2px;
            margin: 0.75rem 0;
            overflow-x: auto;
            color: var(--ink);
            line-height: 1.6;
        }

        .command-description {
            font-size: 0.95rem;
            color: var(--ink-soft);
            margin: 0.75rem 0;
            line-height: 1.7;
        }

        .command-when {
            font-family: var(--sans);
            font-size: 0.9rem;
            color: var(--ink-faded);
            margin: 0.75rem 0;
            padding: 0.75rem;
            background-color: rgba(196, 181, 153, 0.3);
            border-radius: 2px;
            line-height: 1.6;
        }

        .command-when::before {
            content: 'â†’ ';
            color: var(--gold);
            font-weight: 600;
        }

        .command-tips {
            font-family: var(--sans);
            font-size: 0.9rem;
            color: var(--ink-faded);
            margin: 0.75rem 0;
            padding: 0.75rem;
            background-color: rgba(181, 55, 42, 0.08);
            border-left: 2px solid var(--red);
            border-radius: 2px;
            line-height: 1.6;
        }

        .command-tips::before {
            content: 'ğŸ’¡ ';
        }

        .package-note {
            font-family: var(--sans);
            font-size: 0.9rem;
            color: var(--tea);
            margin: 0.5rem 0 0 0;
            font-style: italic;
        }

        .example-box {
            margin: 1rem 0;
            padding: 0.75rem;
            background-color: rgba(240, 235, 220, 0.5);
            border: 1px dashed var(--parchment);
            border-radius: 2px;
            font-family: var(--mono);
            font-size: 0.85rem;
            color: var(--ink-soft);
            line-height: 1.5;
        }

        footer {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid var(--parchment);
            text-align: center;
            font-family: var(--sans);
            font-size: 0.875rem;
            color: var(--ink-ghost);
        }

        .multilingual {
            display: flex;
            gap: 1rem;
            margin: 0.75rem 0;
        }

        .multilingual-item {
            flex: 1;
        }

        .multilingual-label {
            font-family: var(--sans);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: var(--ink-faded);
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        @media (max-width: 640px) {
            .container {
                padding: 1.5rem 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.5rem;
            }

            h3 {
                font-size: 1.1rem;
            }

            .header-top {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .lang-toggle {
                align-self: flex-start;
            }

            .multilingual {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <a href="../empirical-modeling.html" class="back-link"><span class="en">Empirical Modeling</span><span class="zh">å¯¦è­‰å»ºæ¨¡</span></a>
                <div class="lang-toggle">
                    <button class="lang-btn active" data-lang="en">English</button>
                    <button class="lang-btn" data-lang="zh">ä¸­æ–‡</button>
                </div>
            </div>
            <h1><span class="en">Commands</span><span class="zh">å‘½ä»¤è¡Œ</span></h1>
            <p class="subtitle"><span class="en">Reference Â· Stata & R</span><span class="zh">åƒè€ƒ Â· Stata å’Œ R</span></p>
        </header>

        <nav class="toc">
            <div class="toc-title"><span class="en">Contents</span><span class="zh">ç›®éŒ„</span></div>
            <ul>
                <li><a href="#ols-gls"><span class="en">OLS & GLS</span><span class="zh">æ™®é€šæœ€å°å¹³æ–¹æ³• & å»£ç¾©æœ€å°å¹³æ–¹æ³•</span></a></li>
                <li><a href="#robustness"><span class="en">Robust Standard Errors</span><span class="zh">ç©©å¥æ¨™æº–å·®</span></a></li>
                <li><a href="#panel"><span class="en">Panel Data Models</span><span class="zh">é¢æ¿æ•¸æ“šæ¨¡å‹</span></a></li>
                <li><a href="#discrete"><span class="en">Discrete Choice Models</span><span class="zh">é›¢æ•£é¸æ“‡æ¨¡å‹</span></a></li>
                <li><a href="#endogeneity"><span class="en">Endogeneity & IV</span><span class="zh">å…§ç”Ÿæ€§èˆ‡å·¥å…·è®Šé‡</span></a></li>
                <li><a href="#timeseries"><span class="en">Time Series</span><span class="zh">æ™‚é–“åºåˆ—</span></a></li>
                <li><a href="#spatial"><span class="en">Spatial Models</span><span class="zh">ç©ºé–“æ¨¡å‹</span></a></li>
            </ul>
        </nav>

        <!-- OLS & GLS Section -->
        <section id="ols-gls">
            <h2><span class="en">OLS & GLS Regression</span><span class="zh">æ™®é€šæœ€å°å¹³æ–¹æ³• & å»£ç¾©æœ€å°å¹³æ–¹æ³•</span></h2>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Basic OLS Regression</span><span class="zh">åŸºæœ¬OLSè¿´æ­¸</span></div>
                <div class="command-code">reg y x1 x2 x3</div>
                <p class="command-description">
                    <span class="en">Estimates an ordinary least squares model with outcome variable <code>y</code> and predictors <code>x1</code>, <code>x2</code>, <code>x3</code>. Provides coefficient estimates, standard errors, t-statistics, p-values, and R-squared.</span>
                    <span class="zh">ç”¨çµæœè®Šé‡ <code>y</code> å’Œé æ¸¬è®Šé‡ <code>x1</code>ã€<code>x2</code>ã€<code>x3</code> ä¼°è¨ˆæ™®é€šæœ€å°å¹³æ–¹æ³•æ¨¡å‹ã€‚æä¾›ä¿‚æ•¸ä¼°è¨ˆã€æ¨™æº–å·®ã€tçµ±è¨ˆé‡ã€på€¼å’ŒRå¹³æ–¹ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Cross-sectional data, no heteroscedasticity concerns</span>
                    <span class="zh">ä½•æ™‚ï¼šæˆªé¢æ•¸æ“šï¼Œç„¡ç•°æ–¹å·®å•é¡Œ</span>
                </div>
                <div class="command-tips">
                    <span class="en">Interpretation: Each coefficient represents the change in <code>y</code> for a one-unit increase in the predictor, holding others constant.</span>
                    <span class="zh">è§£é‡‹ï¼šæ¯å€‹ä¿‚æ•¸è¡¨ç¤ºåœ¨ä¿æŒå…¶ä»–è®Šé‡ä¸è®Šçš„æƒ…æ³ä¸‹ï¼Œé æ¸¬è®Šé‡å¢åŠ ä¸€å€‹å–®ä½æ™‚ <code>y</code> çš„è®ŠåŒ–ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">OLS Regression</span><span class="zh">OLSè¿´æ­¸</span></div>
                <div class="command-code">lm(y ~ x1 + x2 + x3, data = df)
summary(model)</div>
                <p class="command-description">
                    <span class="en">Base R function for OLS regression. The <code>lm()</code> function estimates the model, and <code>summary()</code> displays detailed results including coefficients, standard errors, and p-values.</span>
                    <span class="zh">Rçš„åŸºæœ¬OLSè¿´æ­¸å‡½æ•¸ã€‚<code>lm()</code>å‡½æ•¸ä¼°è¨ˆæ¨¡å‹ï¼Œ<code>summary()</code>é¡¯ç¤ºè©³ç´°çµæœï¼ŒåŒ…æ‹¬ä¿‚æ•¸ã€æ¨™æº–å·®å’Œpå€¼ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Standard linear regression with OLS estimator</span>
                    <span class="zh">ä½•æ™‚ï¼šä½¿ç”¨OLSä¼°è¨ˆå™¨çš„æ¨™æº–ç·šæ€§è¿´æ­¸</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Generalized Linear Model (GLS)</span><span class="zh">å»£ç¾©ç·šæ€§æ¨¡å‹ (GLS)</span></div>
                <div class="command-code">library(nlme)
gls(y ~ x1 + x2, data = df,
    weights = varFixed(~x1),
    correlation = corAR1())</div>
                <p class="command-description">
                    <span class="en">The <code>gls()</code> function from the <code>nlme</code> package allows specification of heteroscedasticity structures, autocorrelation, and weights. Useful for accounts for non-constant variance and correlated errors.</span>
                    <span class="zh"><code>nlme</code>åŒ…ä¸­çš„<code>gls()</code>å‡½æ•¸å…è¨±æŒ‡å®šç•°æ–¹å·®çµæ§‹ã€è‡ªç›¸é—œå’Œæ¬Šé‡ã€‚é©ç”¨æ–¼è€ƒæ…®éæ†å®šæ–¹å·®å’Œç›¸é—œèª¤å·®çš„æƒ…æ³ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Heteroscedastic errors or correlated errors in cross-sectional data</span>
                    <span class="zh">ä½•æ™‚ï¼šæˆªé¢æ•¸æ“šä¸­å­˜åœ¨ç•°æ–¹å·®èª¤å·®æˆ–ç›¸é—œèª¤å·®</span>
                </div>
            </div>
        </section>

        <!-- Robust Standard Errors -->
        <section id="robustness">
            <h2><span class="en">Robust Standard Errors</span><span class="zh">ç©©å¥æ¨™æº–å·®</span></h2>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Robust SEs (Heteroscedasticity-Consistent)</span><span class="zh">ç©©å¥æ¨™æº–å·®ï¼ˆç•°æ–¹å·®ä¸€è‡´ï¼‰</span></div>
                <div class="command-code">reg y x1 x2 x3, robust</div>
                <p class="command-description">
                    <span class="en">Uses Huber-White robust standard errors (HC1) that are consistent under heteroscedasticity of unknown form. Does not assume constant error variance.</span>
                    <span class="zh">ä½¿ç”¨Huber-Whiteç©©å¥æ¨™æº–å·®ï¼ˆHC1ï¼‰ï¼Œåœ¨ä»»æ„ç•°æ–¹å·®ä¸‹éƒ½æ˜¯ä¸€è‡´çš„ã€‚ä¸å‡è¨­æ†å®šçš„èª¤å·®æ–¹å·®ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Heteroscedasticity present, no specific structure known</span>
                    <span class="zh">ä½•æ™‚ï¼šå­˜åœ¨ç•°æ–¹å·®ï¼ŒæœªçŸ¥å…·é«”çµæ§‹</span>
                </div>
                <div class="command-tips">
                    <span class="en">Default for applied work. Typically produces larger SEs and narrower confidence intervals than homoscedastic SEs.</span>
                    <span class="zh">æ‡‰ç”¨å·¥ä½œçš„é»˜èªé¸æ“‡ã€‚é€šå¸¸æ¯”åŒæ–¹å·®æ¨™æº–å·®ç”¢ç”Ÿæ›´å¤§çš„SEå’Œæ›´çª„çš„ç½®ä¿¡å€é–“ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Cluster-Robust SEs</span><span class="zh">èšé¡ç©©å¥æ¨™æº–å·®</span></div>
                <div class="command-code">reg y x1 x2 x3, vce(cluster clustervar)</div>
                <p class="command-description">
                    <span class="en">Allows for arbitrary correlation within clusters (e.g., students within schools). Corrects standard errors for within-cluster correlation while assuming independence across clusters.</span>
                    <span class="zh">å…è¨±ç¾¤é›†å…§ä»»æ„ç›¸é—œï¼ˆå¦‚å­¸æ ¡å…§çš„å­¸ç”Ÿï¼‰ã€‚ä¿®æ­£æ¨™æº–å·®ä»¥è€ƒæ…®ç¾¤é›†å…§ç›¸é—œï¼ŒåŒæ™‚å‡è¨­ç¾¤é›†é–“ç¨ç«‹ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Data has nested structure (multilevel, hierarchical) with correlated errors within groups</span>
                    <span class="zh">ä½•æ™‚ï¼šæ•¸æ“šå…·æœ‰åµŒå¥—çµæ§‹ï¼ˆå¤šå±¤æ¬¡ï¼‰ï¼Œç¾¤çµ„å…§èª¤å·®ç›¸é—œ</span>
                </div>
                <div class="command-tips">
                    <span class="en">Number of clusters should be â‰¥30 for asymptotic approximation to be reliable. Small number of clusters requires wild bootstrap correction.</span>
                    <span class="zh">ç¾¤é›†æ•¸æ‡‰â‰¥30ï¼Œæ¼¸è¿‘è¿‘ä¼¼æ‰å¯é ã€‚ç¾¤é›†æ•¸å°‘å‰‡éœ€è¦é‡ç”Ÿè‡ªèˆ‰ä¿®æ­£ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Heteroscedasticity-Consistent SEs</span><span class="zh">ç•°æ–¹å·®ä¸€è‡´æ¨™æº–å·®</span></div>
                <div class="command-code">library(sandwich)
library(lmtest)
model <- lm(y ~ x1 + x2, data = df)
coeftest(model, vcov = vcovHC(model, type = "HC1"))</div>
                <p class="command-description">
                    <span class="en">The <code>sandwich</code> package provides <code>vcovHC()</code> for HC (heteroscedasticity-consistent) variance-covariance matrices. Use <code>coeftest()</code> from <code>lmtest</code> to display results with robust SEs.</span>
                    <span class="zh"><code>sandwich</code>åŒ…æä¾›<code>vcovHC()</code>ç”¨æ–¼HCæ–¹å·®-å”æ–¹å·®çŸ©é™£ã€‚ä½¿ç”¨<code>lmtest</code>ä¸­çš„<code>coeftest()</code>é¡¯ç¤ºç©©å¥SEçµæœã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Testing heteroscedasticity-robust inference for OLS estimates</span>
                    <span class="zh">ä½•æ™‚ï¼šå°OLSä¼°è¨ˆé€²è¡Œç•°æ–¹å·®ç©©å¥æ¨è«–æ¸¬è©¦</span>
                </div>
                <div class="example-box">
                    <span class="en"><code>type = "HC1"</code> (default), <code>"HC2"</code>, <code>"HC3"</code> offer different small-sample corrections</span>
                    <span class="zh"><code>type = "HC1"</code>ï¼ˆé»˜èªï¼‰ã€<code>"HC2"</code>ã€<code>"HC3"</code>æä¾›ä¸åŒçš„å°æ¨£æœ¬ä¿®æ­£</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Cluster-Robust SEs</span><span class="zh">èšé¡ç©©å¥æ¨™æº–å·®</span></div>
                <div class="command-code">library(lmtest)
library(sandwich)
coeftest(model, vcov = vcovCL(model,
                              cluster = df$cluster_id))</div>
                <p class="command-description">
                    <span class="en">The <code>vcovCL()</code> function from <code>sandwich</code> calculates cluster-robust variance estimates. Useful for data with hierarchical structure where observations within clusters are correlated.</span>
                    <span class="zh"><code>sandwich</code>ä¸­çš„<code>vcovCL()</code>å‡½æ•¸è¨ˆç®—èšé¡ç©©å¥æ–¹å·®ä¼°è¨ˆã€‚ç”¨æ–¼å…·æœ‰å±¤ç´šçµæ§‹ä¸”ç¾¤çµ„å…§è§€æ¸¬å€¼ç›¸é—œçš„æ•¸æ“šã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Multilevel data, repeated measures, or panel data with clustering</span>
                    <span class="zh">ä½•æ™‚ï¼šå¤šå±¤æ¬¡æ•¸æ“šã€é‡è¤‡æ¸¬é‡æˆ–å…·æœ‰èšé¡çš„é¢æ¿æ•¸æ“š</span>
                </div>
            </div>
        </section>

        <!-- Panel Data Models -->
        <section id="panel">
            <h2><span class="en">Panel Data Models</span><span class="zh">é¢æ¿æ•¸æ“šæ¨¡å‹</span></h2>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Fixed Effects (Within) Estimator</span><span class="zh">å›ºå®šæ•ˆæ‡‰ï¼ˆçµ„å…§ï¼‰ä¼°è¨ˆå™¨</span></div>
                <div class="command-code">xtreg y x1 x2, fe</div>
                <p class="command-description">
                    <span class="en">Fixed effects estimator removes time-invariant unobserved heterogeneity by including unit-specific intercepts (fixed effects). Eliminates between-unit variation and focuses on within-unit changes.</span>
                    <span class="zh">å›ºå®šæ•ˆæ‡‰ä¼°è¨ˆå™¨é€šéåŒ…æ‹¬å–®ä½ç‰¹å®šæˆªè·ï¼ˆå›ºå®šæ•ˆæ‡‰ï¼‰ä¾†æ¶ˆé™¤æ™‚é–“ä¸è®Šçš„æœªè§€å¯Ÿç•°è³ªæ€§ã€‚æ¶ˆé™¤å–®ä½é–“è®Šç•°ï¼Œå°ˆæ³¨æ–¼å–®ä½å…§è®ŠåŒ–ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Endogeneity due to time-invariant omitted variables; causality interest within units over time</span>
                    <span class="zh">ä½•æ™‚ï¼šç”±æ™‚é–“ä¸è®Šçš„éºæ¼è®Šé‡é€ æˆçš„å…§ç”Ÿæ€§ï¼›é—œæ³¨å–®ä½å…§éš¨æ™‚é–“çš„å› æœæ€§</span>
                </div>
                <div class="command-tips">
                    <span class="en">Time-invariant predictors are dropped from the model. Use <code>xtreg y x1 x2, fe i(unit) t(time)</code> to check validity and display results clearly.</span>
                    <span class="zh">æ™‚é–“ä¸è®Šçš„é æ¸¬è®Šé‡å¾æ¨¡å‹ä¸­åˆªé™¤ã€‚ä½¿ç”¨<code>xtreg y x1 x2, fe i(unit) t(time)</code>æª¢æŸ¥æœ‰æ•ˆæ€§ä¸¦æ¸…æ¥šé¡¯ç¤ºçµæœã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Random Effects (GLS) Estimator</span><span class="zh">éš¨æ©Ÿæ•ˆæ‡‰ï¼ˆGLSï¼‰ä¼°è¨ˆå™¨</span></div>
                <div class="command-code">xtreg y x1 x2, re</div>
                <p class="command-description">
                    <span class="en">Random effects estimator assumes unobserved unit effects are uncorrelated with predictors. Uses GLS to account for the error structure. More efficient than FE when assumption holds.</span>
                    <span class="zh">éš¨æ©Ÿæ•ˆæ‡‰ä¼°è¨ˆå™¨å‡è¨­æœªè§€å¯Ÿçš„å–®ä½æ•ˆæ‡‰èˆ‡é æ¸¬è®Šé‡ä¸ç›¸é—œã€‚ä½¿ç”¨GLSè€ƒæ…®èª¤å·®çµæ§‹ã€‚ç•¶å‡è¨­æˆç«‹æ™‚æ¯”FEæ›´æœ‰æ•ˆã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Unit effects uncorrelated with predictors; time-invariant predictors are of interest; efficiency concern</span>
                    <span class="zh">ä½•æ™‚ï¼šå–®ä½æ•ˆæ‡‰èˆ‡é æ¸¬è®Šé‡ç„¡é—œï¼›é—œå¿ƒæ™‚é–“ä¸è®Šé æ¸¬è®Šé‡ï¼›æ•ˆç‡å•é¡Œ</span>
                </div>
                <div class="command-tips">
                    <span class="en">Run Hausman test to compare FE vs RE: <code>est store fixed_model</code>, then <code>xtreg ... re</code>, then <code>hausman fixed_model</code>. If p &lt; 0.05, reject RE assumption.</span>
                    <span class="zh">é‹è¡ŒHausmanæ¸¬è©¦æ¯”è¼ƒFE vs REï¼š<code>est store fixed_model</code>ï¼Œç„¶å¾Œ<code>xtreg ... re</code>ï¼Œç„¶å¾Œ<code>hausman fixed_model</code>ã€‚è‹¥p &lt; 0.05ï¼Œæ‹’çµ•REå‡è¨­ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Fixed Effects Model (plm)</span><span class="zh">å›ºå®šæ•ˆæ‡‰æ¨¡å‹ (plm)</span></div>
                <div class="command-code">library(plm)
model_fe <- plm(y ~ x1 + x2, data = df,
                 index = c("id", "year"),
                 model = "within")</div>
                <p class="command-description">
                    <span class="en">The <code>plm</code> (panel linear model) package provides <code>plm()</code> for panel data estimation. <code>model = "within"</code> specifies fixed effects. Automatically handles the panel structure.</span>
                    <span class="zh"><code>plm</code>ï¼ˆé¢æ¿ç·šæ€§æ¨¡å‹ï¼‰åŒ…æä¾›<code>plm()</code>ç”¨æ–¼é¢æ¿æ•¸æ“šä¼°è¨ˆã€‚<code>model = "within"</code>æŒ‡å®šå›ºå®šæ•ˆæ‡‰ã€‚è‡ªå‹•è™•ç†é¢æ¿çµæ§‹ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Panel data with unit and time structure; within-unit estimation</span>
                    <span class="zh">ä½•æ™‚ï¼šå…·æœ‰å–®ä½å’Œæ™‚é–“çµæ§‹çš„é¢æ¿æ•¸æ“šï¼›å–®ä½å…§ä¼°è¨ˆ</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Random Effects Model (plm)</span><span class="zh">éš¨æ©Ÿæ•ˆæ‡‰æ¨¡å‹ (plm)</span></div>
                <div class="command-code">library(plm)
model_re <- plm(y ~ x1 + x2, data = df,
                 index = c("id", "year"),
                 model = "random")</div>
                <p class="command-description">
                    <span class="en">Fixed effects estimator using <code>plm</code> with <code>model = "random"</code>. Assumes unit effects are random and uncorrelated with predictors. More efficient than FE under this assumption.</span>
                    <span class="zh">ä½¿ç”¨<code>plm</code>çš„éš¨æ©Ÿæ•ˆæ‡‰ä¼°è¨ˆå™¨ï¼Œ<code>model = "random"</code>ã€‚å‡è¨­å–®ä½æ•ˆæ‡‰æ˜¯éš¨æ©Ÿçš„ä¸”èˆ‡é æ¸¬è®Šé‡ç„¡é—œã€‚åœ¨æ­¤å‡è¨­ä¸‹æ¯”FEæ›´æœ‰æ•ˆã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Efficiency desired and unobserved effects assumption is credible</span>
                    <span class="zh">ä½•æ™‚ï¼šéœ€è¦æ•ˆç‡ä¸”æœªè§€å¯Ÿæ•ˆæ‡‰å‡è¨­æ˜¯å¯ä¿¡çš„</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Multilevel/Mixed Effects Model (lme4)</span><span class="zh">å¤šå±¤æ¬¡/æ··åˆæ•ˆæ‡‰æ¨¡å‹ (lme4)</span></div>
                <div class="command-code">library(lme4)
model <- lmer(y ~ x1 + x2 + (1 | group),
              data = df)
summary(model)</div>
                <p class="command-description">
                    <span class="en">The <code>lme4</code> package provides <code>lmer()</code> for mixed-effects models. <code>(1 | group)</code> specifies random intercepts by group. Flexible for complex hierarchical structures.</span>
                    <span class="zh"><code>lme4</code>åŒ…æä¾›<code>lmer()</code>ç”¨æ–¼æ··åˆæ•ˆæ‡‰æ¨¡å‹ã€‚<code>(1 | group)</code>æŒ‡å®šæŒ‰çµ„åˆ¥çš„éš¨æ©Ÿæˆªè·ã€‚éˆæ´»æ‡‰å°è¤‡é›œå±¤ç´šçµæ§‹ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Multilevel data (nested), random slopes, or complex correlation structures</span>
                    <span class="zh">ä½•æ™‚ï¼šå¤šå±¤æ¬¡æ•¸æ“šï¼ˆåµŒå¥—ï¼‰ã€éš¨æ©Ÿæ–œç‡æˆ–è¤‡é›œç›¸é—œçµæ§‹</span>
                </div>
                <div class="example-box">
                    <span class="en">Random slopes: <code>(x1 | group)</code>; Multiple grouping levels: <code>(1 | school/class)</code></span>
                    <span class="zh">éš¨æ©Ÿæ–œç‡ï¼š<code>(x1 | group)</code>ï¼›å¤šå€‹åˆ†çµ„ç´šåˆ¥ï¼š<code>(1 | school/class)</code></span>
                </div>
            </div>
        </section>

        <!-- Discrete Choice Models -->
        <section id="discrete">
            <h2><span class="en">Discrete Choice Models</span><span class="zh">é›¢æ•£é¸æ“‡æ¨¡å‹</span></h2>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Logit Model</span><span class="zh">Logitæ¨¡å‹</span></div>
                <div class="command-code">logit y x1 x2 x3</div>
                <p class="command-description">
                    <span class="en">Estimates a logit model for binary outcomes (0/1). Uses maximum likelihood. Results show log-odds; interpret with caution or convert to marginal effects.</span>
                    <span class="zh">ç‚ºäºŒå…ƒçµæœï¼ˆ0/1ï¼‰ä¼°è¨ˆlogitæ¨¡å‹ã€‚ä½¿ç”¨æœ€å¤§æ¦‚ç„¶æ³•ã€‚çµæœé¡¯ç¤ºå°æ•¸å‹¢æ¯”ï¼›è¬¹æ…è§£é‡‹æˆ–è½‰æ›ç‚ºé‚Šéš›æ•ˆæ‡‰ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Binary outcome variable (e.g., yes/no, employed/unemployed, default/no-default)</span>
                    <span class="zh">ä½•æ™‚ï¼šäºŒå…ƒçµæœè®Šé‡ï¼ˆå¦‚æ˜¯/å¦ã€å—åƒ±/å¤±æ¥­ã€é•ç´„/æœªé•ç´„ï¼‰</span>
                </div>
                <div class="command-tips">
                    <span class="en">Coefficients are log-odds ratios. Use <code>logit y x1 x2, or</code> to display odds ratios directly. For predictions: <code>predict prob_y</code> after logit. Calculate marginal effects with <code>margins</code>.</span>
                    <span class="zh">ä¿‚æ•¸æ˜¯å°æ•¸å‹¢æ¯”ã€‚ä½¿ç”¨<code>logit y x1 x2, or</code>ç›´æ¥é¡¯ç¤ºå‹¢æ¯”ã€‚å°æ–¼é æ¸¬ï¼šåœ¨logitå¾Œä½¿ç”¨<code>predict prob_y</code>ã€‚ä½¿ç”¨<code>margins</code>è¨ˆç®—é‚Šéš›æ•ˆæ‡‰ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Probit Model</span><span class="zh">Probitæ¨¡å‹</span></div>
                <div class="command-code">probit y x1 x2 x3</div>
                <p class="command-description">
                    <span class="en">Probit model using standard normal CDF instead of logistic function. Similar to logit but with different functional form. Results in similar predictions for typical cases.</span>
                    <span class="zh">ä½¿ç”¨æ¨™æº–å¸¸æ…‹CDFè€Œéé‚è¼¯å‡½æ•¸çš„Probitæ¨¡å‹ã€‚èˆ‡logité¡ä¼¼ä½†å‡½æ•¸å½¢å¼ä¸åŒã€‚é€šå¸¸æƒ…æ³ä¸‹é æ¸¬çµæœç›¸ä¼¼ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Binary outcome; theory suggests normal error distribution; comparing with logit for robustness</span>
                    <span class="zh">ä½•æ™‚ï¼šäºŒå…ƒçµæœï¼›ç†è«–è¡¨æ˜å¸¸æ…‹èª¤å·®åˆ†ä½ˆï¼›èˆ‡logitæ¯”è¼ƒä»¥æª¢é©—ç©©å¥æ€§</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Logit/Probit Model</span><span class="zh">Logit/Probitæ¨¡å‹</span></div>
                <div class="command-code">library(AER)  # or base R
model <- glm(y ~ x1 + x2 + x3,
             family = binomial(link = "logit"),
             data = df)
summary(model)</div>
                <p class="command-description">
                    <span class="en"><code>glm()</code> (generalized linear model) with <code>family = binomial(link = "logit")</code> for logit. Use <code>link = "probit"</code> for probit. Displays coefficients and their significance.</span>
                    <span class="zh"><code>glm()</code>ï¼ˆå»£ç¾©ç·šæ€§æ¨¡å‹ï¼‰èˆ‡<code>family = binomial(link = "logit")</code>ç”¨æ–¼logitã€‚ä½¿ç”¨<code>link = "probit"</code>é€²è¡Œprobitã€‚é¡¯ç¤ºä¿‚æ•¸åŠå…¶é¡¯è‘—æ€§ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Binary outcome; standard logit/probit estimation</span>
                    <span class="zh">ä½•æ™‚ï¼šäºŒå…ƒçµæœï¼›æ¨™æº–logit/probitä¼°è¨ˆ</span>
                </div>
                <div class="example-box">
                    <span class="en">Predictions: <code>predict(model, type = "response")</code> gives probabilities. Marginal effects: use <code>margins</code> package.</span>
                    <span class="zh">é æ¸¬ï¼š<code>predict(model, type = "response")</code>çµ¦å‡ºæ¦‚ç‡ã€‚é‚Šéš›æ•ˆæ‡‰ï¼šä½¿ç”¨<code>margins</code>åŒ…ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Marginal Effects</span><span class="zh">é‚Šéš›æ•ˆæ‡‰</span></div>
                <div class="command-code">logit y x1 x2 x3
margins, dydx(*) atmeans</div>
                <p class="command-description">
                    <span class="en">After logit/probit, <code>margins</code> calculates marginal effects at the mean (MEM). <code>dydx(*)</code> gives effect of each variable on predicted probability.</span>
                    <span class="zh">åœ¨logit/probitä¹‹å¾Œï¼Œ<code>margins</code>è¨ˆç®—å¹³å‡é‚Šéš›æ•ˆæ‡‰ï¼ˆMEMï¼‰ã€‚<code>dydx(*)</code>çµ¦å‡ºæ¯å€‹è®Šé‡å°é æ¸¬æ¦‚ç‡çš„æ•ˆæ‡‰ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Interpreting discrete choice model results; reporting policy impacts in probability terms</span>
                    <span class="zh">ä½•æ™‚ï¼šè§£é‡‹é›¢æ•£é¸æ“‡æ¨¡å‹çµæœï¼›ç”¨æ¦‚ç‡é …å ±å‘Šæ”¿ç­–å½±éŸ¿</span>
                </div>
            </div>
        </section>

        <!-- Endogeneity & IV -->
        <section id="endogeneity">
            <h2><span class="en">Endogeneity & Instrumental Variables</span><span class="zh">å…§ç”Ÿæ€§èˆ‡å·¥å…·è®Šé‡</span></h2>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">2SLS (Two-Stage Least Squares)</span><span class="zh">2SLSï¼ˆå…©éšæ®µæœ€å°å¹³æ–¹æ³•ï¼‰</span></div>
                <div class="command-code">ivregress 2sls y (x1 = z1 z2) x2 x3</div>
                <p class="command-description">
                    <span class="en">Estimates 2SLS: <code>x1</code> is endogenous and instrumented by <code>z1</code>, <code>z2</code> (excluded instruments). <code>x2</code>, <code>x3</code> are exogenous. Stage 1 predicts <code>x1</code> from instruments; Stage 2 regresses <code>y</code> on predicted <code>x1</code>.</span>
                    <span class="zh">ä¼°è¨ˆ2SLSï¼š<code>x1</code>å…§ç”Ÿä¸”ç”±<code>z1</code>ã€<code>z2</code>ï¼ˆæ’é™¤å·¥å…·ï¼‰å·¥å…·åŒ–ã€‚<code>x2</code>ã€<code>x3</code>æ˜¯å¤–ç”Ÿçš„ã€‚ç¬¬ä¸€éšæ®µå¾å·¥å…·é æ¸¬<code>x1</code>ï¼›ç¬¬äºŒéšæ®µåœ¨é æ¸¬<code>x1</code>ä¸Šè¿´æ­¸<code>y</code>ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Endogeneity (reverse causality, omitted variable bias, measurement error) and valid instruments exist</span>
                    <span class="zh">ä½•æ™‚ï¼šå­˜åœ¨å…§ç”Ÿæ€§ï¼ˆåå‘å› æœã€éºæ¼è®Šé‡åå·®ã€æ¸¬é‡èª¤å·®ï¼‰ä¸”å­˜åœ¨æœ‰æ•ˆå·¥å…·</span>
                </div>
                <div class="command-tips">
                    <span class="en">Test instrument strength: <code>estat firststage</code>. If F-stat &lt; 10, weak instruments. Run overidentification test: <code>estat overid</code>. Interpret results carefully; weak instruments bias 2SLS toward OLS bias.</span>
                    <span class="zh">æ¸¬è©¦å·¥å…·å¼·åº¦ï¼š<code>estat firststage</code>ã€‚è‹¥Fçµ±è¨ˆé‡ &lt; 10ï¼Œå·¥å…·è¼ƒå¼±ã€‚é‹è¡Œéåº¦è­˜åˆ¥æ¸¬è©¦ï¼š<code>estat overid</code>ã€‚ä»”ç´°è§£é‡‹çµæœï¼›å¼±å·¥å…·ä½¿2SLSåå‘OLSåå·®ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">2SLS with AER Package</span><span class="zh">AERåŒ…çš„2SLS</span></div>
                <div class="command-code">library(AER)
model_iv <- ivreg(y ~ x1 + x2 |
                   z1 + z2 + x2,
                   data = df)
summary(model_iv)</div>
                <p class="command-description">
                    <span class="en">The <code>AER</code> package's <code>ivreg()</code> implements 2SLS. Formula: <code>y ~ endogenous_vars + exogenous_vars | instruments + exogenous_vars</code>. Left side of | lists instruments.</span>
                    <span class="zh"><code>AER</code>åŒ…çš„<code>ivreg()</code>å¯¦ç¾2SLSã€‚å…¬å¼ï¼š<code>y ~ å…§ç”Ÿè®Šé‡ + å¤–ç”Ÿè®Šé‡ | å·¥å…· + å¤–ç”Ÿè®Šé‡</code>ã€‚|å·¦å´åˆ—å‡ºå·¥å…·ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: 2SLS estimation in R with standard toolkit</span>
                    <span class="zh">ä½•æ™‚ï¼šä½¿ç”¨Ræ¨™æº–å·¥å…·åŒ…é€²è¡Œ2SLSä¼°è¨ˆ</span>
                </div>
                <div class="example-box">
                    <span class="en">Test weak instruments: <code>summary(model_iv, diagnostics = TRUE)</code>. Includes first-stage F-stat and overidentification test.</span>
                    <span class="zh">æ¸¬è©¦å¼±å·¥å…·ï¼š<code>summary(model_iv, diagnostics = TRUE)</code>ã€‚åŒ…æ‹¬ç¬¬ä¸€éšæ®µFçµ±è¨ˆé‡å’Œéåº¦è­˜åˆ¥æ¸¬è©¦ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">GMM (Generalized Method of Moments)</span><span class="zh">GMMï¼ˆå»£ç¾©çŸ©ä¼°è¨ˆï¼‰</span></div>
                <div class="command-code">gmm (y - {b0} - {b1}*x1 - {b2}*x2),
    instruments(z1 z2 x2) onestep</div>
                <p class="command-description">
                    <span class="en"><code>gmm</code> command for nonlinear models or dynamic panels. <code>instruments()</code> specifies moment conditions. Flexible for complex endogeneity structures.</span>
                    <span class="zh"><code>gmm</code>å‘½ä»¤ç”¨æ–¼éç·šæ€§æ¨¡å‹æˆ–å‹•æ…‹é¢æ¿ã€‚<code>instruments()</code>æŒ‡å®šçŸ©æ¢ä»¶ã€‚å°è¤‡é›œå…§ç”Ÿæ€§çµæ§‹éˆæ´»ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Nonlinear models with endogeneity; dynamic panel models (Arellano-Bond)</span>
                    <span class="zh">ä½•æ™‚ï¼šå…·æœ‰å…§ç”Ÿæ€§çš„éç·šæ€§æ¨¡å‹ï¼›å‹•æ…‹é¢æ¿æ¨¡å‹ï¼ˆArellano-Bondï¼‰</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Weak Instrument Testing</span><span class="zh">å¼±å·¥å…·æ¸¬è©¦</span></div>
                <div class="command-code">library(AER)
first_stage <- lm(x1 ~ z1 + z2 + x2, data = df)
f_stat <- summary(first_stage)$fstatistic[1]
# Weak if F < 10</div>
                <p class="command-description">
                    <span class="en">Manually calculate first-stage F-statistic to test instrument strength. F-stat &lt; 10 indicates weak instruments; results may be unreliable or biased toward OLS.</span>
                    <span class="zh">æ‰‹å‹•è¨ˆç®—ç¬¬ä¸€éšæ®µFçµ±è¨ˆé‡ä»¥æ¸¬è©¦å·¥å…·å¼·åº¦ã€‚Fçµ±è¨ˆé‡ &lt; 10è¡¨ç¤ºå·¥å…·è¼ƒå¼±ï¼›çµæœå¯èƒ½ä¸å¯é æˆ–åå‘OLSã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Assessing IV validity and instrument strength before inference</span>
                    <span class="zh">ä½•æ™‚ï¼šåœ¨æ¨è«–å‰è©•ä¼°IVæœ‰æ•ˆæ€§å’Œå·¥å…·å¼·åº¦</span>
                </div>
            </div>
        </section>

        <!-- Time Series -->
        <section id="timeseries">
            <h2><span class="en">Time Series Models</span><span class="zh">æ™‚é–“åºåˆ—æ¨¡å‹</span></h2>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">VAR (Vector Autoregression)</span><span class="zh">VARï¼ˆå‘é‡è‡ªè¿´æ­¸ï¼‰</span></div>
                <div class="command-code">var y1 y2 y3, lags(2)</div>
                <p class="command-description">
                    <span class="en">Estimates a VAR model with 2 lags for a system of 3 variables. Each variable's current value depends on past values of all variables. Useful for analyzing dynamic interdependencies.</span>
                    <span class="zh">ç‚º3å€‹è®Šé‡çš„ç³»çµ±ä¼°è¨ˆ2éšæ»¯å¾Œçš„VARæ¨¡å‹ã€‚æ¯å€‹è®Šé‡çš„ç•¶å‰å€¼å–æ±ºæ–¼æ‰€æœ‰è®Šé‡çš„éå»å€¼ã€‚ç”¨æ–¼åˆ†æå‹•æ…‹ç›¸äº’ä¾è³´ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Multiple time series with feedback; impulse response analysis; forecasting system</span>
                    <span class="zh">ä½•æ™‚ï¼šå…·æœ‰åé¥‹çš„å¤šå€‹æ™‚é–“åºåˆ—ï¼›è¡å‹•åæ‡‰åˆ†æï¼›ç³»çµ±é æ¸¬</span>
                </div>
                <div class="command-tips">
                    <span class="en">Check lag order with <code>varsoc</code> before VAR. Examine impulse responses: <code>irf create myirf</code>, <code>irf plot</code>. Test for cointegration if variables are I(1).</span>
                    <span class="zh">åœ¨VARå‰ç”¨<code>varsoc</code>æª¢æŸ¥æ»¯å¾Œéšæ•¸ã€‚æª¢æŸ¥è¡å‹•åæ‡‰ï¼š<code>irf create myirf</code>ã€<code>irf plot</code>ã€‚å¦‚æœè®Šé‡æ˜¯I(1)ï¼Œæ¸¬è©¦å”æ•´ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">ARIMA (AutoRegressive Integrated Moving Average)</span><span class="zh">ARIMAï¼ˆè‡ªè¿´æ­¸ç¶œåˆç§»å‹•å¹³å‡ï¼‰</span></div>
                <div class="command-code">library(forecast)
auto_model <- auto.arima(ts_data,
                         seasonal = FALSE)
summary(auto_model)</div>
                <p class="command-description">
                    <span class="en"><code>auto.arima()</code> automatically selects ARIMA order (p,d,q) by comparing information criteria. Handles differencing and seasonality. Simpler alternative to manual order selection.</span>
                    <span class="zh"><code>auto.arima()</code>é€šéæ¯”è¼ƒä¿¡æ¯æº–å‰‡è‡ªå‹•é¸æ“‡ARIMAéšæ•¸(p,d,q)ã€‚è™•ç†å·®åˆ†å’Œå­£ç¯€æ€§ã€‚æ¯”æ‰‹å‹•éšæ•¸é¸æ“‡æ›´ç°¡å–®ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Single time series forecasting; stationarity concerns; seasonal patterns</span>
                    <span class="zh">ä½•æ™‚ï¼šå–®æ™‚é–“åºåˆ—é æ¸¬ï¼›å¹³ç©©æ€§å•é¡Œï¼›å­£ç¯€æ¨¡å¼</span>
                </div>
                <div class="example-box">
                    <span class="en">Manual specification: <code>arima(y, order = c(1, 1, 1))</code> for ARIMA(1,1,1). Forecast: <code>forecast(model, h = 12)</code> for 12-period ahead.</span>
                    <span class="zh">æ‰‹å‹•è¦ç¯„ï¼š<code>arima(y, order = c(1, 1, 1))</code>ç”¨æ–¼ARIMA(1,1,1)ã€‚é æ¸¬ï¼š<code>forecast(model, h = 12)</code>æå‰12æœŸã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">VAR (Vector Autoregression)</span><span class="zh">VARï¼ˆå‘é‡è‡ªè¿´æ­¸ï¼‰</span></div>
                <div class="command-code">library(vars)
var_model <- VAR(data_matrix, p = 2,
                 type = "const")
summary(var_model)</div>
                <p class="command-description">
                    <span class="en">The <code>vars</code> package provides <code>VAR()</code> for multivariate time series. <code>p = 2</code> specifies 2 lags. Returns coefficient estimates for each equation. Allows impulse response and Granger causality analysis.</span>
                    <span class="zh"><code>vars</code>åŒ…æä¾›<code>VAR()</code>ç”¨æ–¼å¤šè®Šé‡æ™‚é–“åºåˆ—ã€‚<code>p = 2</code>æŒ‡å®š2éšæ»¯å¾Œã€‚è¿”å›æ¯å€‹æ–¹ç¨‹çš„ä¿‚æ•¸ä¼°è¨ˆã€‚å…è¨±è¡å‹•åæ‡‰å’ŒGrangerå› æœåˆ†æã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Multivariate time series analysis; structural relationships; forecasting multiple variables</span>
                    <span class="zh">ä½•æ™‚ï¼šå¤šè®Šé‡æ™‚é–“åºåˆ—åˆ†æï¼›çµæ§‹é—œä¿‚ï¼›å¤šè®Šé‡é æ¸¬</span>
                </div>
                <div class="example-box">
                    <span class="en">Impulse response: <code>irf(var_model, impulse = "x1", response = "y")</code>. Granger causality: <code>causality(var_model, cause = "x1")</code>.</span>
                    <span class="zh">è¡å‹•åæ‡‰ï¼š<code>irf(var_model, impulse = "x1", response = "y")</code>ã€‚Grangerå› æœï¼š<code>causality(var_model, cause = "x1")</code>ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Unit Root Test (ADF)</span><span class="zh">å–®ä½æ ¹æ¸¬è©¦ï¼ˆADFï¼‰</span></div>
                <div class="command-code">dfuller y, lags(4) trend</div>
                <p class="command-description">
                    <span class="en">Augmented Dickey-Fuller test for unit roots. Null hypothesis: unit root (series is I(1)). If p-value &lt; 0.05, reject null and conclude series is stationary.</span>
                    <span class="zh">å¢å¼·Dickey-Fullerå–®ä½æ ¹æ¸¬è©¦ã€‚é›¶å‡è¨­ï¼šå–®ä½æ ¹ï¼ˆåºåˆ—æ˜¯I(1)ï¼‰ã€‚è‹¥på€¼ &lt; 0.05ï¼Œæ‹’çµ•é›¶å‡è¨­ä¸¦çµè«–åºåˆ—æ˜¯å¹³ç©©çš„ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Time series analysis; before VAR/cointegration; checking stationarity assumption</span>
                    <span class="zh">ä½•æ™‚ï¼šæ™‚é–“åºåˆ—åˆ†æï¼›åœ¨VAR/å”æ•´å‰ï¼›æª¢æŸ¥å¹³ç©©æ€§å‡è¨­</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Unit Root Test (ADF)</span><span class="zh">å–®ä½æ ¹æ¸¬è©¦ï¼ˆADFï¼‰</span></div>
                <div class="command-code">library(tseries)
adf.test(y)
# p-value < 0.05 suggests stationarity</div>
                <p class="command-description">
                    <span class="en"><code>adf.test()</code> from the <code>tseries</code> package performs Augmented Dickey-Fuller test. Returns test statistic and p-value for stationarity assessment.</span>
                    <span class="zh"><code>tseries</code>åŒ…çš„<code>adf.test()</code>é€²è¡Œå¢å¼·Dickey-Fulleræ¸¬è©¦ã€‚è¿”å›æ¸¬è©¦çµ±è¨ˆé‡å’Œpå€¼ç”¨æ–¼å¹³ç©©æ€§è©•ä¼°ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Assessing stationarity before time series modeling</span>
                    <span class="zh">ä½•æ™‚ï¼šæ™‚é–“åºåˆ—å»ºæ¨¡å‰è©•ä¼°å¹³ç©©æ€§</span>
                </div>
            </div>
        </section>

        <!-- Spatial Models -->
        <section id="spatial">
            <h2><span class="en">Spatial Models</span><span class="zh">ç©ºé–“æ¨¡å‹</span></h2>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Spatial OLS with Moran's I Test</span><span class="zh">ç©ºé–“OLSèˆ‡Moran's Iæ¸¬è©¦</span></div>
                <div class="command-code">spreg y x1 x2, id(id) model(ols) moran</div>
                <p class="command-description">
                    <span class="en">Spatial regression with <code>model(ols)</code> and Moran's I test for spatial autocorrelation. <code>id()</code> specifies cross-section identifier. Tests null of no spatial autocorrelation in residuals.</span>
                    <span class="zh">ç©ºé–“è¿´æ­¸ï¼Œ<code>model(ols)</code>å’ŒMoran's Iç©ºé–“è‡ªç›¸é—œæ¸¬è©¦ã€‚<code>id()</code>æŒ‡å®šæˆªé¢æ¨™è­˜ç¬¦ã€‚æ¸¬è©¦æ®˜å·®ä¸­ç„¡ç©ºé–“è‡ªç›¸é—œçš„é›¶å‡è¨­ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Geographic/spatial data; testing for spatial autocorrelation; cross-sectional analysis with location</span>
                    <span class="zh">ä½•æ™‚ï¼šåœ°ç†/ç©ºé–“æ•¸æ“šï¼›æ¸¬è©¦ç©ºé–“è‡ªç›¸é—œï¼›å…·æœ‰ä½ç½®çš„æˆªé¢åˆ†æ</span>
                </div>
                <div class="command-tips">
                    <span class="en">If Moran's I p-value &lt; 0.05, spatial autocorrelation is significant. Consider spatial lag or spatial error model. Define spatial weights matrix first (e.g., queen contiguity).</span>
                    <span class="zh">è‹¥Moran's I på€¼ &lt; 0.05ï¼Œç©ºé–“è‡ªç›¸é—œé¡¯è‘—ã€‚è€ƒæ…®ç©ºé–“æ»¯å¾Œæˆ–ç©ºé–“èª¤å·®æ¨¡å‹ã€‚å…ˆå®šç¾©ç©ºé–“æ¬Šé‡çŸ©é™£ï¼ˆå¦‚çš‡åé„°æ¥ï¼‰ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Spatial Lag Model (SAR)</span><span class="zh">ç©ºé–“æ»¯å¾Œæ¨¡å‹ï¼ˆSARï¼‰</span></div>
                <div class="command-code">spreg y x1 x2, id(id) model(lag) weights(W)</div>
                <p class="command-description">
                    <span class="en">Spatial autoregressive (lag) model: outcome depends on neighboring outcomes plus predictors. <code>weights(W)</code> specifies spatial weights. Accounts for spatial interdependence.</span>
                    <span class="zh">ç©ºé–“è‡ªè¿´æ­¸ï¼ˆæ»¯å¾Œï¼‰æ¨¡å‹ï¼šçµæœå–æ±ºæ–¼é„°è¿‘çµæœåŠ é æ¸¬è®Šé‡ã€‚<code>weights(W)</code>æŒ‡å®šç©ºé–“æ¬Šé‡ã€‚è€ƒæ…®ç©ºé–“ç›¸äº’ä¾è³´ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Outcome variable is spatially correlated; peer effects; spatial spillovers</span>
                    <span class="zh">ä½•æ™‚ï¼šçµæœè®Šé‡ç©ºé–“ç›¸é—œï¼›åŒä¼´æ•ˆæ‡‰ï¼›ç©ºé–“æº¢å‡º</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label stata">Stata</div>
                <div class="command-label"><span class="en">Spatial Error Model (SEM)</span><span class="zh">ç©ºé–“èª¤å·®æ¨¡å‹ï¼ˆSEMï¼‰</span></div>
                <div class="command-code">spreg y x1 x2, id(id) model(error) weights(W)</div>
                <p class="command-description">
                    <span class="en">Spatial error model: errors are spatially autocorrelated. <code>model(error)</code> specifies the spatial error structure. Omitted variables or measurement error may cause spatial error autocorrelation.</span>
                    <span class="zh">ç©ºé–“èª¤å·®æ¨¡å‹ï¼šèª¤å·®ç©ºé–“è‡ªç›¸é—œã€‚<code>model(error)</code>æŒ‡å®šç©ºé–“èª¤å·®çµæ§‹ã€‚éºæ¼è®Šé‡æˆ–æ¸¬é‡èª¤å·®å¯èƒ½å°è‡´ç©ºé–“èª¤å·®è‡ªç›¸é—œã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Spatial autocorrelation in errors (residuals); omitted spatial variables</span>
                    <span class="zh">ä½•æ™‚ï¼šèª¤å·®çš„ç©ºé–“è‡ªç›¸é—œï¼ˆæ®˜å·®ï¼‰ï¼›éºæ¼ç©ºé–“è®Šé‡</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Spatial LAG Model (spdep)</span><span class="zh">ç©ºé–“æ»¯å¾Œæ¨¡å‹ï¼ˆspdepï¼‰</span></div>
                <div class="command-code">library(spdep)
model_sar <- lagsarlm(y ~ x1 + x2,
                      data = df,
                      listw = W)
summary(model_sar)</div>
                <p class="command-description">
                    <span class="en">The <code>spdep</code> package provides <code>lagsarlm()</code> for spatial lag model. <code>listw</code> is a weights object (created with <code>nb2listw()</code> or similar). Estimates SAR model via ML.</span>
                    <span class="zh"><code>spdep</code>åŒ…æä¾›<code>lagsarlm()</code>ç”¨æ–¼ç©ºé–“æ»¯å¾Œæ¨¡å‹ã€‚<code>listw</code>æ˜¯æ¬Šé‡å°è±¡ï¼ˆä½¿ç”¨<code>nb2listw()</code>ç­‰å‰µå»ºï¼‰ã€‚é€šéMLä¼°è¨ˆSARæ¨¡å‹ã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Spatial lag model in R; accounting for spatial autocorrelation in outcome</span>
                    <span class="zh">ä½•æ™‚ï¼šRä¸­çš„ç©ºé–“æ»¯å¾Œæ¨¡å‹ï¼›è€ƒæ…®çµæœçš„ç©ºé–“è‡ªç›¸é—œ</span>
                </div>
                <div class="example-box">
                    <span class="en">Spatial error model: <code>errorsarlm(y ~ x1 + x2, data = df, listw = W)</code>. Create weights: <code>W <- nb2listw(knearneigh(coordinates(df), k = 5))</code>.</span>
                    <span class="zh">ç©ºé–“èª¤å·®æ¨¡å‹ï¼š<code>errorsarlm(y ~ x1 + x2, data = df, listw = W)</code>ã€‚å‰µå»ºæ¬Šé‡ï¼š<code>W <- nb2listw(knearneigh(coordinates(df), k = 5))</code>ã€‚</span>
                </div>
            </div>

            <div class="command-group">
                <div class="software-label r">R</div>
                <div class="command-label"><span class="en">Moran's I Test (spdep)</span><span class="zh">Moran's Iæ¸¬è©¦ï¼ˆspdepï¼‰</span></div>
                <div class="command-code">library(spdep)
moran_test <- moran.test(y, listw = W)
moran_test</div>
                <p class="command-description">
                    <span class="en"><code>moran.test()</code> tests for spatial autocorrelation. Null: no spatial autocorrelation. If p &lt; 0.05, significant spatial autocorrelation detected in the variable.</span>
                    <span class="zh"><code>moran.test()</code>æ¸¬è©¦ç©ºé–“è‡ªç›¸é—œã€‚é›¶å‡è¨­ï¼šç„¡ç©ºé–“è‡ªç›¸é—œã€‚è‹¥p &lt; 0.05ï¼Œåœ¨è®Šé‡ä¸­æª¢æ¸¬åˆ°é¡¯è‘—ç©ºé–“è‡ªç›¸é—œã€‚</span>
                </p>
                <div class="command-when">
                    <span class="en">When: Assessing spatial autocorrelation before modeling; diagnostic testing</span>
                    <span class="zh">ä½•æ™‚ï¼šå»ºæ¨¡å‰è©•ä¼°ç©ºé–“è‡ªç›¸é—œï¼›è¨ºæ–·æ¸¬è©¦</span>
                </div>
            </div>
        </section>

        <footer>
            <p><span class="en">Commands Reference Â· Empirical Modeling Â· Generated 2025</span><span class="zh">å‘½ä»¤åƒè€ƒ Â· å¯¦è­‰å»ºæ¨¡ Â· ç”Ÿæˆæ–¼2025å¹´</span></p>
        </footer>
    </div>

    <script>
        // Language toggle functionality
        const langBtns = document.querySelectorAll('.lang-btn');
        const body = document.body;

        // Check for saved language preference
        const savedLang = localStorage.getItem('em-lang') || 'en';
        if (savedLang === 'zh') {
            body.classList.add('zh');
            langBtns.forEach(btn => {
                if (btn.dataset.lang === 'zh') {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        langBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const lang = btn.dataset.lang;

                // Update body class
                body.classList.toggle('zh', lang === 'zh');

                // Update button states
                langBtns.forEach(b => {
                    b.classList.toggle('active', b.dataset.lang === lang);
                });

                // Save preference
                localStorage.setItem('em-lang', lang);
            });
        });
    </script>
</body>
</html>
